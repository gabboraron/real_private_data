<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
</head>
<body>
<p><img src="Pictures/100000000000014100000141512AD2B930E50BCE.jpg" width="140" height="140" />Eötvös Loránd Tudományegyetem</p>
<p>Informatikai Kar</p>
<p> Programozási Nyelvek és Fordítóprogramok Tanszék</p>
<p></p>
<p></p>
<p></p>
<p></p>
<p>Kliens oldalon maximálisan titkosított adatbázis</p>
<p>verzió 0.14</p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<h1 id="bevezetés"><span id="anchor"></span>Bevezetés</h1>
<h2 id="motiváció"><span id="anchor-1"></span>Motiváció</h2>
<p>Jelen világunkban az információ érték, ezért gyakorlatilag mindenki visszaél vele.</p>
<p>Sajnos nem ellenőrizhetem azt, hogy az operációs rendszer, amit használok, mennyi információt gyűjt rólam, és mire használja fel. Ez nincs másképp az e-mail szolgáltatókkal, a különböző felhő alapú tárolókkal.</p>
<p>Nem tudom ellenőrizni, hogy ha egy felhőben tárolom az adataimat, akkor vajon a Google, a Microsoft, a Facebook, az Apple vagy más cégek, akik ilyeneket szolgáltatnak, felhasználják-e őket. Ilyen szempontból mondjuk a megnevezettek még korrektek, mert az általános szerződési feltételeikben megfogalmazzák, hogy az adatainkat felhasználják.</p>
<p>Sajnos arra jelenleg nincs erőforrásom, hogy egy saját operációs rendszert írjak, vagy leellenőrizzek egy Linuxot, Open/Free BSD-t hogy vajon visszaél-e az adataimmal, így ezeknek el kell hinnem, hogy nem teszik.</p>
<p>De tudok csinálni olyan programot, ami azt biztosítja számomra, hogy az adataimat a kliens oldalon titkosítva küldöm el a felhőbe, akkor a felhőben lévő cég nem tudhatja, hogy mik is voltak azok.</p>
<p>Így jött az öltet, hogy először egy egyszerű szervert készítek, ahol fájlokat tudok tárolni, melyekben az egyszerűség kedvéért először csak szövegeket, vagy telefonkönyveket tudok tárolni.</p>
<p>Így hiába olvashatja az adott szerverszolgáltató az adataimat, nem fog hozzáférni az információhoz, mert az már a kliens oldalon titkosítva van.</p>
<p>Fontos volt számomra, hogy az általam készített program nyílt forráskódú legyen, hogy biztosítva legyen, hogy tényleg titkosít, és tényleg nem ment semmilyen adatot.</p>
<h2 id="a-feladat"><span id="anchor-2"></span>A feladat</h2>
<p>Egy olyan program írása, ami szöveges adatokat, és telefonkönyv adatokat olyan titkosan tart, amennyire csak lehetséges.</p>
<p>A program két részből áll. Egy szerverből és egy kliensből.</p>
<p>A kliensnek négy feladata van:</p>
<ol style="list-style-type: decimal">
<li><p>Telefonköny fájl és txt fájl létrehozása, megjelenítése, módosítása</p>
<ol style="list-style-type: decimal">
<li>A telefonfájl fájlnál figyelni kell arra, hogy a memóriában mindig maximum egy kontaktnak legyenek titkosítatlanul az adatai.</li>
</ol></li>
<li>A fájlok titkosítása, és visszafejtése, még a nevüket is titkosítani kell</li>
<li>A felhasználói adatok titkosítása a szerver elől (még a felhasználónevét is)</li>
<li><p>Kommunikáció a szerverrel (RPC segítségével)</p>
<ol style="list-style-type: decimal">
<li>Autentikáció</li>
<li>Fájlok letöltése, feltöltése, törlése.</li>
</ol></li>
</ol>
<p>A szerver oldalnak öt feladata van:</p>
<ol style="list-style-type: decimal">
<li>A felhasználók autentikációja</li>
<li><p>A felhasználók adatainak tárolása (fájlkiszolgáló)</p>
<ol style="list-style-type: decimal">
<li>Minden felhasználónak létre kell hozni egy mappát, de figyelni kell rá, hogy a felhasználóról minél kevesebb információt tároljon, így hash-elést kell használni, hogy még a felhasználó neve se derülhessen ki.</li>
<li>A fájlok eleve titkosan kell, hogy megérkezzenek, egy titkos névvel, és tartalommal</li>
<li>Ezen fájlok manipulálása: átnevezés, létrehozás, felülírás, törlés.</li>
</ol></li>
<li>A klienssel kommunikálás RPC-t használva.</li>
<li>A kliens statikus fájljainak kiszolgálása.</li>
<li>Biztosítani, hogy a kommunikáció is titkosan zajlik.</li>
<li>Felhasználói dokumentáció</li>
</ol>
<h1 id="felhasználói-dokumentáció"><span id="anchor-3"></span>Felhasználói dokumentáció</h1>
<h2 id="a-program-célja"><span id="anchor-4"></span>A program célja</h2>
<p>Ez a program két részből áll, egy szerverből, és egy kliensből.</p>
<p>A szervernek két feladata van: a felhasználó azonosítása, és fájl kiszolgálás.</p>
<p>A kliens oldal telefonkönyvfájlok, és szöveges fájlok kezelésére, és titkosítására való.</p>
<p>Továbbá kommunikál a szerverrel.</p>
<h2 id="kiknek-íródott-ez-a-program"><span id="anchor-5"></span>Kiknek íródott ez a program?</h2>
<p>A program célközönsége olyan felhasználók sokasága, akik nem bíznak a felhőszolgáltatókban, és biztosak szeretnének lenni abban, hogy az adataik biztonságban vannak.</p>
<h3 id="felhasználói-előismeretek"><span id="anchor-6"></span>Felhasználói előismeretek</h3>
<p>A program két részből áll, egy kliens oldaliból, és egy szerver oldaliból, így van egy felhasználói oldala, és egy üzemeltetői oldala</p>
<h4 id="kliens-oldali-felhasználói-előismeretek"><span id="anchor-7"></span>Kliens oldali felhasználói előismeretek</h4>
<p>Azoknak a felhasználóknak, akiknek csak a klienst kell használniuk, elegendő minimális informatikai ismerettel rendelkeznie. Csak a böngésző használata követelmény a számára</p>
<h4 id="a-szerver-üzemeltetői-előismeretek."><span id="anchor-8"></span>A szerver üzemeltetői előismeretek.</h4>
<p>Igyekeztem minél egyszerűbben konfigurálható szervert létrehozni, és igyekeztem részletes telepítési, és üzemeltetési útmutatót adni. Mindemellett érdemes minimális szintű Linux ismeretekkel rendelkezni.</p>
<h2 id="fontosabb-eszközök-a-megvalósításhoz"><span id="anchor-9"></span>Fontosabb eszközök a megvalósításhoz</h2>
<p><strong>AES256 algoritmus:</strong> A fájlok, és a fájlok neveinek titkosításához</p>
<p><strong>SHA256 algoritmus (sózva):</strong> a felhasználó nevek és jelszavak titkosításához, a felhasználói mappa létrehozásához, meg az AES kulcs generálásához.</p>
<p>HTTPS: Az adatok titkos továbbításához.</p>
<p>tornado: Python webszerver, a statikus fájlok kiszolgálásáért, és az RPC legalsó rétegéért.</p>
<p>Jsonrpcserver, simple-jsonrpc-js: Az RPC kommunikációért (a tornado felett).</p>
<h2 id="szükséges-hardver-és-szoftver-feltételek"><span id="anchor-10"></span>Szükséges hardver és szoftver feltételek</h2>
<h3 id="hardware"><span id="anchor-11"></span>Hardware</h3>
<p>RAM: 16GB (ez lehet, hogy kevés lesz sok felhasználóra.)</p>
<p>Processor: Intel(R) Core(TM) i7-4600U CPU @ 2.10GHz</p>
<h3 id="szoftver"><span id="anchor-12"></span>Szoftver</h3>
<h4 id="operációs-rendszer"><span id="anchor-13"></span>Operációs rendszer</h4>
<p><strong>Distributor ID: </strong>Ubuntu</p>
<p><strong>Description: </strong>Ubuntu 18.04.4 LTS</p>
<p><strong>Release: </strong>18.04</p>
<p><strong>Codename: </strong>bionic</p>
<h4 id="python"><span id="anchor-14"></span>Python</h4>
<p>Python 3.6.9</p>
<table>
<tbody>
<tr class="odd">
<td>tornado</td>
<td>6.0.3</td>
<td><a href="https://www.tornadoweb.org/en/stable/" class="uri">https://www.tornadoweb.org/en/stable/</a><br />
<a href="https://github.com/tornadoweb/tornado/" class="uri">https://github.com/tornadoweb/tornado/</a><br />
<a href="https://pypi.org/project/tornado/3.2.1/">https://pypi.org/project/tornado/</a></td>
</tr>
<tr class="even">
<td>jsonrpcserver</td>
<td>4.1.2</td>
<td><p><a href="https://github.com/bcb/jsonrpcserver" class="uri">https://github.com/bcb/jsonrpcserver</a></p>
<p><a href="https://pypi.org/project/jsonrpcserver/" class="uri">https://pypi.org/project/jsonrpcserver/</a></p></td>
</tr>
<tr class="odd">
<td>pandas</td>
<td>1.0.3</td>
<td><a href="https://pandas.pydata.org/" class="uri">https://pandas.pydata.org/</a><br />
<a href="https://github.com/pandas-dev/pandas" class="uri">https://github.com/pandas-dev/pandas</a><br />
<a href="https://pypi.org/project/pandas/" class="uri">https://pypi.org/project/pandas/</a></td>
</tr>
<tr class="even">
<td>pyexcel-ods</td>
<td>0.5.6</td>
<td><a href="https://github.com/pyexcel/pyexcel-ods" class="uri">https://github.com/pyexcel/pyexcel-ods</a><br />
<a href="https://pypi.org/project/pyexcel-ods/" class="uri">https://pypi.org/project/pyexcel-ods/</a></td>
</tr>
</tbody>
</table>
<h4 id="böngészők"><span id="anchor-15"></span>Böngészők</h4>
<p>Google Chrome80.0.3987.149<a href="https://www.google.com/chrome/" class="uri">https://www.google.com/chrome/</a><br />
Mozilla Firefox74.0 <a href="https://www.mozilla.org/en-US/firefox/" class="uri">https://www.mozilla.org/en-US/firefox/</a></p>
<h4 id="javascript">JavaScript</h4>
<p>Ecmascript 6</p>
<table>
<tbody>
<tr class="odd">
<td>aes-js</td>
<td>3.1.2</td>
<td><a href="https://www.npmjs.com/package/aes-js" class="uri">https://www.npmjs.com/package/aes-js</a><br />
<a href="https://cdn.rawgit.com/ricmoo/aes-js" class="uri">https://cdn.rawgit.com/ricmoo/aes-js</a></td>
</tr>
<tr class="even">
<td>bootstrap</td>
<td>4.4.1</td>
<td><a href="https://getbootstrap.com/" class="uri">https://getbootstrap.com/</a></td>
</tr>
<tr class="odd">
<td>jquery</td>
<td>3.4.1.slim</td>
<td><a href="https://jquery.com/" class="uri">https://jquery.com/</a></td>
</tr>
<tr class="even">
<td>js-sha256</td>
<td>0.9.0</td>
<td><a href="https://www.npmjs.com/package/js-sha256" class="uri">https://www.npmjs.com/package/js-sha256</a></td>
</tr>
<tr class="odd">
<td>popper.js</td>
<td>1.16.0</td>
<td><a href="https://popper.js.org/" class="uri">https://popper.js.org/</a></td>
</tr>
<tr class="even">
<td>simple-jsonrpc-js</td>
<td>1.0.0</td>
<td><a href="https://github.com/jershell/simple-jsonrpc-js" class="uri">https://github.com/jershell/simple-jsonrpc-js</a></td>
</tr>
</tbody>
</table>
<h2 id="letöltés-githubról"><span id="anchor-16"></span>Letöltés githubról</h2>
<p>A programot a githubról lehet letölteni. Programozóknak a git-tel javaslom, felhasználóknak teljesen megfelelő a szimpla zip-es letöltés.</p>
<ol style="list-style-type: decimal">
<li><p>git-tel</p>
<ol style="list-style-type: decimal">
<li>git installálás (ha nincs telepítve)<br />
<strong>sudo apt install git</strong></li>
<li><p>klónozás</p>
<ol style="list-style-type: decimal">
<li><strong>git clone </strong><a href="https://github.com/somla/real_private_data.git"><strong>https://github.com/somla/real_private_data.git</strong></a><strong><br />
</strong>vagy</li>
<li><strong>git clone </strong><a href="mailto:git@github.com"><strong>git@github.com</strong></a><strong>:somla/real_private_data.git<br />
</strong>vagy</li>
<li>Forokolod a saját repoid közé (fejlesztőknek)</li>
</ol></li>
</ol></li>
<li><p>Letöltés githubról zip formátumban</p>
<ol style="list-style-type: decimal">
<li>Egy böngészőben nyissuk meg ezt a linket:<br />
<a href="https://github.com/somla/real_private_data" class="uri">https://github.com/somla/real_private_data</a></li>
<li>Kattintsunk a <strong>Clone or download </strong>gombra</li>
<li>Kattintsunk a <strong>Download ZIP </strong>gombra</li>
<li>Tömörítsük ki<br />
<strong>unzip real_private_data-master.zip</strong></li>
</ol></li>
</ol>
<h2 id="installálás"><span id="anchor-17"></span>Installálás</h2>
<p>Ehhez egy VirtualBoxot használtam, arra feltelepítettem egy Ubuntut, így egy teljesen új linuxon van tesztelve, amin még nincs semmi.</p>
<h3 id="függőségek"><span id="anchor-18"></span>Függőségek</h3>
<p>Ezeket a függőségeket kell telepíteni, hogy a program teljes mértékben működhessen.</p>
<h4 id="iptables-persistent"><span id="anchor-19"></span>Iptables-persistent</h4>
<p>Csak ha portforwardingolni akarunk</p>
<p>sudo apt-get install iptables-persistent</p>
<h4 id="pip3"><span id="anchor-20"></span>pip3</h4>
<p>sudo apt install python3-pip</p>
<h4 id="python-csomagok"><span id="anchor-21"></span>Python csomagok</h4>
<p>sudo pip3 install tornado<br />
sudo pip3 install pandas<br />
sudo pip3 install pyexcel-ods<br />
sudo pip3 install jsonrpcserver</p>
<h3 id="előkészületek"><span id="anchor-22"></span>Előkészületek</h3>
<ol style="list-style-type: decimal">
<li>Menjünk abba a mappába, ahova letöltöttük a programot<br />
<strong>cd ./real_private_data</strong></li>
<li>hozzunk létre egy könyvtárat az adatoknak (nem muszáj itt, de akkor át kell állítani a config-ban lásd a Konfiguráció fejezetet)<br />
<strong>mkdir data</strong></li>
<li>hozzunk létre SSL-kulcsot, vagy ha van saját, akkor másoljuk be a .key mappába, vagy adjuk meg a helyét a config.json-ban (lásd a Konfiguráció fejezetet)<br />
<strong>mkdir .key;<br />
openssl req -x509 -out rpd.crt -keyout rpd.key \<br />
-newkey rsa:2048 -nodes -sha256 \<br />
-subj '/CN=localhost' -extensions EXT -config &lt;( \<br />
printf &quot;[dn]\nCN=localhost\n[req]\ndistinguished_name = dn\n[EXT]\nsubjectAltName=DNS:localhost\nkeyUsage=digitalSignature\nextendedKeyUsage=serverAuth&quot;);<br />
cd ..</strong></li>
<li>Hozzunk létre egy mappát a generált javascript fájloknak<br />
<strong>mkdir src/web/generated/</strong></li>
<li>Másoljuk le a config.sample.json-t a config.json-ra<br />
<strong>cd src/python<br />
cp config.sample.json config.json<br />
cd ../..</strong></li>
<li>Hozz létre legalább egy felhasználót<br />
<strong>./bin/server/rpd_create_user.sh</strong></li>
<li>Ha minden jól sikerült, akkor el kell, hogy tudjuk indítani a szervert<br />
<strong>./bin/server/rpd_server.sh</strong></li>
</ol>
<h3 id="linux-service-létrehozás"><span id="anchor-23"></span>Linux service létrehozás</h3>
<p>A Linux service automatikusan indul, amikor a linux elindul, és újraindul, ha a folyamat valamiért leáll. Én itt egy alapbeállítást mutatok be, további információért nézz utána a Linux folyamatoknak, és a <strong>systemctl</strong> parancsnak</p>
<p>Ehhez érdemes egy új felhasználót létrehozni, nálam ez “rpd-server” lesz<br />
<strong>sudo adduser rpd-server</strong></p>
<ol style="list-style-type: decimal">
<li>hozzunk létre egy új mappát az adatoknak<br />
<strong>sudo mkdir -p /var/local/rpd/data<br />
sudo chown rpd-server:rpd-server /var/local/rpd/data</strong></li>
<li>Csináljunk egy kulcsot a szerverünknek (lásd feljebb: Előkészületek 3. lépés) aminek az rpd-server a tulajdonosa</li>
<li><p>Csináljunk egy config fájlt a service-nek</p>
<ol style="list-style-type: decimal">
<li>Másoljuk le a sample config-ot<br />
<strong>cd {project_dir}/src/python<br />
cp config.sample.json config.service.json</strong></li>
<li><p>Írjuk át a “config.service.json”-t </p>
<ol style="list-style-type: decimal">
<li>data_dir:”/var/local/rpd/data”</li>
<li>secure_port:10443</li>
<li>open_port:10080</li>
<li>crt_file:&lt;crt fájl helye&gt;</li>
<li>key_file:&lt;key fájl helye&gt;</li>
</ol></li>
</ol></li>
<li><p>Csináljunk egy service fájlt:</p>
<ol style="list-style-type: decimal">
<li>másoljuk le a sample-t<br />
<strong>cd {project_dir}/src/service<br />
cp rpd.sample.service rpd.service</strong></li>
<li><p>állítsuk be az “rpd.service”-t</p>
<ol style="list-style-type: decimal">
<li>ExecStart=/home/rpd-server/real_private_data/bin/server/rpd_server.sh --configFile &quot;[[dir_project]]/src/python/config.service.json&quot;</li>
<li>User=rpd-server</li>
</ol></li>
</ol></li>
<li>Hozzunk létre felhasználót (felhasználókat)<br />
<strong>su rpd-server<br />
./bin/server/rpd_create_user.sh –configFile ./src/python/config.service.json</strong></li>
<li>Másoljuk be a service fájlt a linux service könyvtárába<br />
<strong>sudo cp rpd.service /etc/systemd/system/<br />
systemctl daemon-reload<br />
systemctl start rpd<br />
systemctl enable rpd</strong></li>
<li><p>Csináljunk port forwardingot, hogy a 80-as és a 443 portokról lehessen elérni a szervert</p>
<p>sudo iptables -t nat -A OUTPUT -o lo -p tcp --dport 80 -j REDIRECT --to-port 10080</p>
<p>sudo iptables -t nat -A OUTPUT -o lo -p tcp --dport 443 -j REDIRECT --to-port 10443<br />
sudo iptables -i &lt;interface&gt; -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 10080</p>
<p>sudo iptables -i &lt;interface&gt; -t nat -A PREROUTING -p tcp --dport 443 -j REDIRECT --to-port 10443</p>
<p>su</p>
<p>iptables-save &gt; /etc/iptables/rules.v4</p>
<p>ip6tables-save &gt; /etc/iptables/rules.v6</p></li>
</ol>
<h2 id="konfigurálás"><span id="anchor-24"></span>Konfigurálás</h2>
<p>A konfigurálás két módon lehet.<br />
Vagy fájlból, vagy command line argumentumként megadva.<br />
A command line argumentumnak nagyobb prioritása van.<br />
Kötelező, hogy legyen config fájl.<br />
A konfigurációs paraméterek lehetnek publikusak, ez azt jelenti, hogy a kliens oldalon is láthatóak.<br />
A nem publikus konfig beállítások csak a szerver oldalon láthatóak.</p>
<h3 id="konfigurációs-változók"><span id="anchor-25"></span>Konfigurációs változók</h3>
<p>A konfigba vannak változók amiket [[változó név]]-ként érünk el.<br />
Például: <strong>./rpd_server.sh –logLevel /</strong><em><strong>var</strong></em><strong>/tmp/log[[now]].log<br />
./rpd_server.sh –logLevel /</strong><em><strong>var</strong></em><strong>/tmp/log20200330_163019.log </strong>lesz, vagy ehhez hasonló</p>
<table>
<tbody>
<tr class="odd">
<td>[[dir_project]]</td>
<td>A projekt gyökér könyvtára</td>
<td></td>
</tr>
<tr class="even">
<td>[[dir_src]]</td>
<td>A projekt src könyvtára</td>
<td></td>
</tr>
<tr class="odd">
<td>[[dir_web]]</td>
<td>A projektben lévő web könyvtára</td>
<td></td>
</tr>
<tr class="even">
<td>[[dir_python]]</td>
<td>A projektben lévő python fájlok könyvtára</td>
<td></td>
</tr>
<tr class="odd">
<td>[[now]]</td>
<td>Az aktuális idő ÉvHóNap_ÓraPercMásodperc formában</td>
<td>20200330_163019</td>
</tr>
<tr class="even">
<td>[[today]]</td>
<td>A mai nap ÉvHóNap formában</td>
<td>20200330</td>
</tr>
</tbody>
</table>
<h3 id="konfigurációs-opciók"><span id="anchor-26"></span>Konfigurációs opciók</h3>
<table>
<tbody>
<tr class="odd">
<td>configFile</td>
<td>Config json, ez az a konfig fájl, amiből a beállítások jönnek: config.json</td>
<td>./config.json</td>
<td>Igen</td>
<td>Nem</td>
</tr>
<tr class="even">
<td>debug</td>
<td>Debug mód, ha be van kapcsolva, akkor több ellenőrzés van, több log van, de az a logLeveltől is függ.</td>
<td>False</td>
<td>Igen</td>
<td>Igen</td>
</tr>
<tr class="odd">
<td>logLevel</td>
<td>logLevel, értékei lehetnek<br />
CRITICAL - 50<br />
ERROR - 40<br />
WARNING - 30<br />
INFO - 20<br />
DEBUG -10<br />
NOTSET – 0<br />
Lásd: <a href="https://docs.python.org/3/library/logging.html" class="uri">https://docs.python.org/3/library/logging.html</a></td>
<td>INFO</td>
<td>Igen</td>
<td>Nem</td>
</tr>
<tr class="even">
<td>logFile</td>
<td>Log fájl, helye, ha nem töltjük ki, akkor nem logolunk fájlba, csak a consolera.</td>
<td></td>
<td>Igen</td>
<td>Nem</td>
</tr>
<tr class="odd">
<td>logFormat</td>
<td>Log formátuma, ahogy a python várja lásd: <a href="https://docs.python.org/3/library/logging.html#logging.Formatter">https://docs.python.org/3/library/</a><a href="https://docs.python.org/3/library/logging.html#logging.Formatter">logging.html#logging.Formatter</a></td>
<td>[%(asctime)s][%(levelname)s] %(message)s</td>
<td>Igen</td>
<td>Nem</td>
</tr>
<tr class="even">
<td>show_rpc_message</td>
<td>Mutassuk-e az rpc üzeneteket</td>
<td>False</td>
<td>Igen</td>
<td>Nem</td>
</tr>
<tr class="odd">
<td>open_port</td>
<td>Indítunk egy http szervert is, ami átirányít a https szerverre, ennek a portja</td>
<td>8080</td>
<td>Igen</td>
<td>Nem</td>
</tr>
<tr class="even">
<td>debug_open_port</td>
<td>Debug módban indítunk egy http szervert, ami nem titkos, ez segítheti a debuggolást, de nem biztonságos, így production rendszerbe nem fut</td>
<td>8081</td>
<td>Igen</td>
<td>Nem</td>
</tr>
<tr class="odd">
<td>secure_port</td>
<td>A szerver portja, https kapcsolat</td>
<td>8443</td>
<td>Igen</td>
<td>Nem</td>
</tr>
<tr class="even">
<td>host</td>
<td>a host neve, átirányításnál fontos</td>
<td>localhost</td>
<td>Igen</td>
<td>Nem</td>
</tr>
<tr class="odd">
<td>crt_file</td>
<td>Certification fájl az SSL-hez</td>
<td>None</td>
<td>Nem</td>
<td>Nem</td>
</tr>
<tr class="even">
<td>key_file</td>
<td>Key fájl az SSL-hez</td>
<td>None</td>
<td>Nem</td>
<td>Nem</td>
</tr>
<tr class="odd">
<td>web_root</td>
<td>a statikus fájlok könyvtára</td>
<td>None</td>
<td>Nem</td>
<td>Nem</td>
</tr>
<tr class="even">
<td>data_dir</td>
<td>Az adatok mappája, ide lesznek elmentve a titkos fájljai a felhasználóknak</td>
<td>None</td>
<td>Igen</td>
<td>Nem</td>
</tr>
<tr class="odd">
<td>test_dir</td>
<td>Egy mappa a tesztekhez</td>
<td>/var/tmp/real_private_data</td>
<td>Igen</td>
<td>Nem</td>
</tr>
<tr class="even">
<td>salt</td>
<td>Egy hash &quot;só&quot; a kliens oldalra</td>
<td>My own Salt</td>
<td>Igen</td>
<td>Igen</td>
</tr>
<tr class="odd">
<td>server_salt</td>
<td>Egy hash &quot;só&quot; a szerver oldalra</td>
<td>Server salt</td>
<td>Igen</td>
<td>Nem</td>
</tr>
<tr class="even">
<td>enable_create_user</td>
<td>Engedélyezzük, hogy felhasználók is létre tudjanak hozni új felhasználókat, ha nem, akkor csak a szerveren lehet új felhasználókat létrehozni commandline paranccsal.</td>
<td>False</td>
<td>Igen</td>
<td>Igen</td>
</tr>
<tr class="odd">
<td>defaultRpcClient</td>
<td>Az alapértelmezett RPC metódus neve. jelenleg SimpleJsonRpcWebSocketClientService vagy </td>
<td>SimpleJsonRpcWebSocketClientService</td>
<td>Igen</td>
<td>Igen</td>
</tr>
<tr class="even">
<td>hideMessageTime</td>
<td>Az üzenetek elrejtése előtti idő ezredmásodpercben</td>
<td>5000</td>
<td>Igen</td>
<td>Igen</td>
</tr>
<tr class="odd">
<td>show_encrypted_data</td>
<td>Mutassa a weblapon a titkosított adatot</td>
<td>False</td>
<td>Igen</td>
<td>Igen</td>
</tr>
</tbody>
</table>
<h3 id="példa"><span id="anchor-27"></span>Példa</h3>
<p>my_config.json</p>
<p>{</p>
<p>&quot;debug&quot;:false,</p>
<p>&quot;logLevel&quot;:&quot;INFO&quot;,</p>
<p>&quot;logFile&quot;:&quot;/var/tmp/rpd_[[now]].log&quot;,</p>
<p>&quot;host&quot;:&quot;localhost&quot;,</p>
<p>&quot;open_port&quot;:8080,</p>
<p>&quot;secure_port&quot;:8443,</p>
<p>&quot;crt_file&quot;: &quot;[[dir_project]]/.key/rpd.crt&quot;,</p>
<p>&quot;key_file&quot;: &quot;[[dir_project]]/.key/rpd.key&quot;,</p>
<p>&quot;web_root&quot;: &quot;[[dir_project]]/src/web&quot;,</p>
<p>&quot;data_dir&quot;: &quot;[[dir_project]]/data&quot;</p>
<p>}</p>
<p></p>
<p>ha most meghívjuk a programot<br />
<strong>./rpd_server.sh –configFile –logLevel /</strong><em><strong>var</strong></em><strong>/tmp/log[[now]].log –configFile my_config.json –data_dir “[[dir_project]]/data2”</strong></p>
<p>akkor a command line data dir fog érvényesülni.</p>
<h2 id="section"></h2>
<h2 id="használat"><span id="anchor-28"></span>Használat</h2>
<h3 id="szerver-oldal"><span id="anchor-29"></span>Szerver oldal</h3>
<p>Alapjában véve a <strong>./bin </strong>mappában vannak a futtatható fájlok, ott van egy <strong>server </strong>és egy <strong>tools</strong></p>
<p>A <strong>server</strong> mappában vannak a szerverhez kellő dolgok, a <strong>tools </strong>mappában a fejlesztéshez szükséges toolok, ezért azokat majd a fejlesztői dokumentációban fogom részletezni.</p>
<h4 id="binserverrpd_server.sh"><span id="anchor-30"></span>./bin/server/rpd_server.sh</h4>
<p>Lásd <strong>./src/python/run_server.py</strong></p>
<h4 id="binserverrpd_create_user.sh"><span id="anchor-31"></span>./bin/server/rpd_create_user.sh</h4>
<p>Lásd <strong>./src/python/create_user.py</strong></p>
<h4 id="srcpythonrun_server.py"><span id="anchor-32"></span>./src/python/run_server.py</h4>
<p>Maga a szerver, a beállításokat lásd a <strong>Konfigurálás</strong> fejezetet, alapértelmezettként a <strong>./src/python/config.json </strong>fájlt fogja betölteni --<strong>configFile </strong></p>
<h4 id="srcpythoncreate_user.py"><span id="anchor-33"></span>./src/python/create_user.py</h4>
<p>Felhasználó létrehozása, érdemes beállítani a –<strong>configFile</strong>-t, alapértelmezettként a <strong>./src/python/config.json </strong>fájlt használja.</p>
<p><img src="Pictures/1000020100000302000000867699C55659AA7F03.png" title="fig:" alt=" . ábra: Felhasználó létrehozása CLI felületről" width="567" height="111" /><strong>Enter your username:</strong> Írd be a felhasználónevet<br />
<strong>Enter your password:</strong> Írd be a jelszót<br />
<strong>Enter your password again:</strong> Írd be a jelszót megint</p>
<h3 id="kliens-oldal"><span id="anchor-34"></span>Kliens oldal</h3>
<h4 id="use-case-diagramm">Use case diagramm</h4>
<div class="figure">
<img src="Pictures/10000000000003F2000002764EFC6458387D1A87.png" alt=" 1. ábra: Az oldal Use case diagrammja" width="567" height="353" />
<p class="caption"><br />
1. ábra: Az oldal Use case diagrammja</p>
</div>
<h4 id="az-oldal-elérése"><span id="anchor-35"></span>Az oldal elérése</h4>
<p>Az oldalt az épp aktuális címén lehet elérni a böngészőben, de ha nem akarunk SSL hitelesítést venni, akkor sajnos a böngésző “nem biztonságos”-nak fogja látni az oldalunkat.</p>
<p><img src="Pictures/100002010000027A000003141821B461CE63CD4B.png" title="fig:" alt=" . ábra: SSL hiba továbblépés (1)" width="261" height="421" /><img src="Pictures/1000020100000240000003656F3E774A6844520D.png" title="fig:" alt=". ábra: SSL hiba továbblépés (2)" width="305" height="416" /></p>
<h4 id="bejelentkezés"><span id="anchor-36"></span>Bejelentkezés</h4>
<p>RPC Client: <em>SimpleJsonRpcWebSocketClientService</em>: a kommunikációhoz használjuk a SimpleJsonRpcWebSocketClient-et, ez egy websocket alapú kommunikáció.</p>
<p>Előnye, hogy folyamatos kapcsolat van a szerver, és a kliens között, Hátránya, hogy így folyamatosan van kommunikációs forgalom, de csak elhanyagolható.</p>
<p><em>SimpleJsonRpcPOSTClientService</em>: HTTP post alapú kommunikációt biztosít.</p>
<p>Előnye, hogy csak akkor van kommunikáció, amikor szervertől kérünk valamit. Hátránya, hogy mindig új kapcsolatot kell létesíteni.</p>
<p><img src="Pictures/10000201000001F40000014517A57B782B43355D.png" title="fig:" alt=" 2. ábra: Bejelentkezés űrlap" width="499" height="324" /><strong>Username: </strong>felhasználónév<br />
<strong>Password:</strong> jelszó<br />
<strong>Login</strong>: bejelentkezés gomb a bejelentkezéshez</p>
<h4 id="section-1"></h4>
<h4 id="a-főoldal-struktúrája"><span id="anchor-37"></span>A főoldal struktúrája</h4>
<h4 id="ábra-a-főoldal-struktúrája"><img src="Pictures/10000201000002CE000002D4BBD02C325AD91ACD.png" title="fig:" alt=" 2. ábra: A főoldal struktúrája" width="381" height="376" /></h4>
<h4 id="a-főoldal-gombjai"><span id="anchor-38"></span>A főoldal gombjai</h4>
<p>Felhasználó létrehozása gomb</p>
<p>Ez a gomb csak akkor jelenik meg, ha a enable_create_user opció True (lásd Konfigurálás fejezet)</p>
<p>A fájl neve</p>
<p>Ha rákattintasz, megnyitja a fájlt.</p>
<h5 id="ábra-a-főoldal-gombjaifájl-létrehozása-menü"><img src="Pictures/10000201000002CE000002D481DF485A34A1C615.png" title="fig:" alt="2. ábra: A főoldal gombjai" width="386" height="398" /><span id="anchor-39"></span>Fájl létrehozása menü</h5>
<p>Create txt file: Létrehoz egy txt fájlt</p>
<p><img src="Pictures/10000201000000DA00000090C1CC68BAF501167F.png" title="fig:" alt=" 2. ábra: Új fájl gombjai" width="218" height="144" />Create phonebook file: Létrehoz egy telefonkönyv fájlt</p>
<h5 id="fájl-átnevezés"><span id="anchor-40"></span>Fájl átnevezés</h5>
<p>Fájl neve mező: Ide kell beírni az új nevét a fájlnak</p>
<p>Save gomb: Elmenti a névváltoztatást</p>
<p>Cancel gomb: Megszakítja a névváltoztatást</p>
<h4 id="ábra-a-fájl-jelszavának-megadásatxtphonebook-fájl-megnyitás"><img src="Pictures/10000201000003FD000001488DACD75DE652B2A4.png" title="fig:" alt=" 2. ábra: A fájl jelszavának megadása" width="642" height="206" /><span id="anchor-41"></span>Txt/Phonebook fájl megnyitás</h4>
<p>Ahhoz, hogy megnyissunk egy fájlt, ahhoz be kell írnunk a fájl jelszavát</p>
<p><img src="Pictures/100002010000023F00000090DC9F588F7050B468.png" title="fig:" alt=" 2. ábra: Fáj átnevezése" width="575" height="144" />Back menü: Visszalép a főoldalra<br />
Logout menü: Kilép<br />
Passwort mező: Ide kell írni a fájl jelszavát, hogy megnyissuk<br />
Open file gomb: Megnyitja a fájlt</p>
<h4 id="txt-fájl-oldal-strutúrája">Txt fájl oldal strutúrája</h4>
<h4 id="ábra-a-text-fájl-oldal-struktúrájasave-menü-elmenti-a-txt-fájlt-change-password-menü-megváltoztatja-a-fájl-jelszavát-back-menü-visszamegy-a-főoldalra-logout-menü-kijelentkezik-az-oldalból-txt-mező-a-txt-fájl-tartalma-ez-szerkeszthető-encrypted-mező-a-txt-fájl-titkosítva-ez-csak-akkor-látszik-ha-a-show_encrypted_data-konfiguráció-true-lásd-konfiguráció-fejezet"><img src="Pictures/100002010000040700000230321738856BD950EF.png" title="fig:" alt=" 2. ábra: A text fájl oldal struktúrája" width="642" height="348" /><strong>Save menü: </strong>Elmenti a txt fájlt<strong><br />
Change password menü: </strong>Megváltoztatja a fájl jelszavát<strong><br />
Back menü: </strong>Visszamegy a főoldalra<strong><br />
Logout menü: </strong>Kijelentkezik az oldalból<strong><br />
Txt mező: </strong>A txt fájl tartalma, ez szerkeszthető<strong><br />
Encrypted mező: </strong>A txt fájl titkosítva, ez csak akkor látszik, ha a <strong>show_encrypted_data </strong>konfiguráció <strong>True </strong>(Lásd <strong>Konfiguráció</strong> fejezet)</h4>
<h4 id="section-2"></h4>
<h4 id="txt-fájl-létrehozása"><span id="anchor-42"></span>Txt fájl létrehozása</h4>
<h5 id="ábra-txt-fájl-létrehozása-form"><img src="Pictures/10000201000001F70000016DA1CC577E13C841EB.png" title="fig:" alt=" 2. ábra: Txt fájl létrehozása form" width="503" height="364" /></h5>
<h5 id="back-menü-visszalép-a-főoldalra"><span id="anchor-43"></span>Back menü: Visszalép a főoldalra</h5>
<h5 id="logout-menü-kijelentkezés">Logout menü: Kijelentkezés</h5>
<h5 id="file-name-mező-a-fájl-neve">File name mező: A fájl neve</h5>
<h5 id="new-password-mező-a-fájl-jelszava">New password mező: A fájl jelszava</h5>
<h5 id="new-password-again-mező-a-fájl-jelszava-még-egyszer">New password again mező: A fájl jelszava még egyszer</h5>
<h5 id="create-file-gomb-ez-a-gomb-hozza-létre-a-fájlt-meg-fog-jelenni-egy-üres-fájl.">Create file gomb: Ez a gomb hozza létre a fájlt, meg fog jelenni egy üres fájl.</h5>
<h5 id="a-create-file-gomb-megnyomása-után"><span id="anchor-44"></span>A <em>Create file</em> gomb megnyomása után</h5>
<p><img src="Pictures/100002010000021D0000023A5198B763A9C3BDB0.png" title="fig:" alt=" 2. ábra: A txt fájl készen áll a szerkesztésre, amikor már van neve és jelszava" width="540" height="569" />Save menü: Elmenti a fájlt<br />
Change password menü: Jelszóváltoztatás</p>
<p>Fontos, hogy a fájl csak a <strong>Save </strong>gomb lenyomásával lesz elmentve, ha a fájl létezik, akkor hibát ír. Apró hiba, hogy ezután ismét meg kell nyomni a <strong>Create file </strong>gombot, a fájl átnevezése után (<strong>File name </strong>mező), majd utána megint a <strong>Save</strong> gombot valamikor javítani fogom, hogy intuitívabb legyen.</p>
<h4 id="txttelefonkönyv-fájl-jelszóváltoztatás"><span id="anchor-45"></span>Txt/Telefonkönyv fájl jelszóváltoztatás</h4>
<p><img src="Pictures/100002010000019B0000024CA85F50337F0B14C4.png" title="fig:" alt=" 2. ábra: Fájl jelszóváltoztatás form" width="410" height="588" />Old password mező: Ide kell írni a fájl régi jelszavát<br />
New password mező: Ide kell írni a fájl új jelszavát<br />
New password again mező: Ide kell írni a fájl új jelszavát még egyszer<br />
Change Password gomb: Elmenti az új jelszót<br />
Cancel gomb: Megszakítja a jelszóváltoztatást</p>
<h4 id="telefonkönyv-fájl-oldal-struktúrája"><span id="anchor-46"></span>Telefonkönyv fájl oldal struktúrája</h4>
<div class="figure">
<img src="Pictures/10000201000003FD000002E5EF6CB6DDB659E8C1.png" alt=" 2. ábra: Telefonkönyv fájl oldalstruktúrája" width="642" height="466" />
<p class="caption"><br />
2. ábra: Telefonkönyv fájl oldalstruktúrája</p>
</div>
<ol style="list-style-type: decimal">
<li><p>Menü</p>
<ol style="list-style-type: decimal">
<li>Add contact: Új telefonkönyv bejegyzés hozzáadása</li>
<li>Change password: A fájl jelszavának megváltoztatása</li>
<li>Back: Vissza a főmenüre</li>
<li>Logout: Kilépés</li>
</ol></li>
<li><p>Contact list</p>
<ol style="list-style-type: decimal">
<li>Első oszlop: A kontakt beceneve, ha rákattintunk, akkor több információ is megjelenik a kontaktról, ha még egyszer rákattintunk, akkor eltűnnek az információk</li>
<li>Második oszlop: <strong>Modify</strong> gomb, módosíthatunk a kontakt információin</li>
<li>Harmadik oszlop: <strong>Delete</strong> gomb, törli a kontaktot</li>
</ol></li>
<li><p>Encrypted layer 1: A kétrétegű titkosítás 1. rétegét mutatja (hexadecimális számok)</p>
<p>Ez a réteg kerül fel a szerverre</p></li>
<li><p>Encrypted layer 2: A kétrétegű titkosítás 1. rétegét mutatja (hexadecimális számok)</p>
<p>Ez a réteg van a memóriában, csak akkor dekódolja a második réteget, ha rákattintunk egy kontaktra, és akkor is csak annak a kontaktnak az információit csomagolja ki</p></li>
</ol>
<p>Az <strong>Encrypted layer 1</strong> és az <strong>Encrypted layer 2</strong>, csak akkor látszik, ha beállítjuk a <strong>show_encrypted_data </strong>konfigurációt <strong>True</strong>-ra (Lásd Konfigurálás fejezet)</p>
<h4 id="telefonkönyv-kontakt"><span id="anchor-47"></span>Telefonkönyv kontakt</h4>
<p>Nickname: A kontakt beceneve</p>
<p>Fullname: A kontakt teljes neve</p>
<p>Address: A kontakt címe</p>
<p>Phone numbers: A kontakt telefonszámai</p>
<p>Description: A kontaktról egy leírás</p>
<p>Modify gomb: A telefonszám módosítása</p>
<p>Delete gomb:A telefonszám törlése</p>
<p><img src="Pictures/10000201000001EB000000D4E85EE00DFEEE9811.png" title="fig:" alt=" 2. ábra: Telefonkönyv kontakt" width="491" height="211" />Add phone number gomb: Telefonszám hozzáadása</p>
<h4 id="section-3"></h4>
<h4 id="telefonkönyv-kontakt-telefonszám-módosítás"><span id="anchor-48"></span>Telefonkönyv kontakt – Telefonszám módosítás</h4>
<p><img src="Pictures/1000020100000321000000D14E92B09444BE0ACB.png" title="fig:" alt=" 2. ábra: Telefonszám módosítás űrlap" width="642" height="167" />Típus mező: mobil, vagy office (irodai) vagy home (otthoni) lehet a telefon típusa</p>
<p>Szám mező: a telefonszám</p>
<p>Save gomb: Elmenti a módosítást</p>
<p>Cancel gomb: Megszakítja a módosítást</p>
<h4 id="ábra-telefonszám-hozzáadás-űrlaptelefonkönyv-kontakt-telefonszám-hozzáadás"><img src="Pictures/100002010000029D000000F5A5057F3DD2024691.png" title="fig:" alt=" 2. ábra: Telefonszám hozzáadás űrlap" width="642" height="235" /><span id="anchor-49"></span>Telefonkönyv kontakt – Telefonszám hozzáadás</h4>
<p>Típus mező: mobil, vagy office (irodai) vagy home (otthoni) lehet a telefon típusa</p>
<p>Szám mező: a telefonszám</p>
<p>Save gomb: Elmenti a módosítást</p>
<h4 id="telefonkönyv-kontakt-módosítás"><span id="anchor-50"></span>Telefonkönyv kontakt – Módosítás</h4>
<p><img src="Pictures/100002010000012C000000AB9EC81E950E2AF167.png" title="fig:" alt=" 2. ábra: Kontakt módosítás" width="300" height="170" /><strong>Save gomb: </strong>Elmenti a módosítást</p>
<p><strong>Cancel gomb: </strong>Megszakítja a módosítást</p>
<p><strong>Nickname mező: </strong>A kontakt beceneve</p>
<p><strong>Fullname mező: </strong>A kontakt teljes neve</p>
<p><strong>Address mező: </strong>A kontakt címe</p>
<p><strong>Description mező: </strong>A kontaktról egy leírás</p>
<h4 id="telefonkönyv-új-kontakt-hozzáadása"><span id="anchor-51"></span>Telefonkönyv – Új kontakt hozzáadása</h4>
<p><img src="Pictures/100002010000019700000182E6F03D19803655D2.png" title="fig:" alt=" 2. ábra: Új kontakt hozzáadása űrlap" width="407" height="386" />Save gomb: Elmenti az új kontaktot</p>
<p>Cancel gomb: Megszakítja a kontakt hozzáadását</p>
<p>Nickname mező: A kontakt beceneve</p>
<p>Fullname: A kontakt teljes neve</p>
<p>Address: A kontakt címe</p>
<p>Description: A kontaktról egy leírás</p>
<p>Add phone number: Új telefonszám hozzáadása (lást feljebb)</p>
<p>Megjegyzés: amikor létrehozunk egy Telefonkönyvfájlt, akkor jön igazából létre, amikor az első kontaktot hozzáadtuk.</p>
<h4 id="felhasználó-létrehozása"><span id="anchor-52"></span>Felhasználó létrehozása</h4>
<p><img src="Pictures/100002010000022C0000018F8691609CE31506E2.png" title="fig:" alt=" 2. ábra: Új felhasználó létrehozása űrlap" width="556" height="399" />New Username mező: Új felhasználó neve</p>
<p>Password mező: Új felhasználó jelszava</p>
<p>Password again mező: Új felhasználó jelszava megint</p>
<p>Create User gomb: A felhasználó létrehozása</p>
<h4 id="üzenetek-megjelenítése"><span id="anchor-53"></span>Üzenetek megjelenítése</h4>
<div class="figure">
<img src="Pictures/10000201000003F70000016C21CCC3E30A23471F.png" alt=" 2. ábra: Üzenet megjelenítése (valami sikeres volt)" width="558" height="200" />
<p class="caption"><br />
2. ábra: Üzenet megjelenítése (valami sikeres volt)</p>
</div>
<p>Az üzenetek a menüsor alatt jelennek meg.<br />
Ha valami sikeres volt, akkor zöld hátterük lesz, ha sikertelen, akkor piros.<br />
A hibaüzenetekről lásd a <strong>Hibaüzenetek</strong> fejezetet</p>
<h4 id="hibaüzenetek"><span id="anchor-54"></span>Hibaüzenetek</h4>
<p>Két fajta hiba lehet, lehet kliens oldali (<strong>LOCAL</strong>) és lehet szerver oldali (<strong>REMOTE</strong>) hiba.</p>
<p>A kliens oldali hibák kódjai <strong>1xx</strong> a szerver oldaliak <strong>2xx</strong> alakúak</p>
<p><img src="Pictures/10000201000003F70000016C04C77D7EEB12B9FA.png" title="fig:" alt=" 2. ábra: Hibaüzenet megjelenítése" width="554" height="198" />Egy hibának van kódja, hibaüzenete, és esetleg további adata (például távoli függvény hibánál a függvény hibaüzenete)</p>
<h5 id="section-4"></h5>
<h5 id="lokális-kliens-oldali-hibák-local"><span id="anchor-55"></span>Lokális, kliens oldali hibák (LOCAL)</h5>
<table>
<tbody>
<tr class="odd">
<td>101</td>
<td>CONNECTION_ERROR</td>
<td>Connection error</td>
<td>Kapcsolat hiba</td>
</tr>
<tr class="even">
<td>102</td>
<td>LOCAL_CALL_ERROR</td>
<td>Function call local error</td>
<td>Lokális függvényhiba</td>
</tr>
<tr class="odd">
<td>103</td>
<td>ALREADY_LOGEDIN</td>
<td>You are already logged in</td>
<td>Már be vagy jelentkezve</td>
</tr>
<tr class="even">
<td>104</td>
<td>EMPTY_USERNAME_PASSWORD</td>
<td>Empty <strong>username</strong> and/or <strong>password</strong> and/or <strong>password again</strong></td>
<td>Üres <strong>felhasználónév</strong> és/vagy <strong>jelszó</strong> és/vagy a <strong>jelszó még egyszer</strong> mező üres</td>
</tr>
<tr class="odd">
<td>105</td>
<td>PASSWORD_NOT_EQUAL_PASSWORD2</td>
<td><strong>Password</strong> and <strong>password</strong> <strong>again</strong> is not equal</td>
<td>A <strong>jelszó</strong> és a <strong>jelszó még egyszer</strong> nem egyezik</td>
</tr>
<tr class="even">
<td>106</td>
<td>PASWORD_PASSWORD2_EMPTY</td>
<td><strong>Password</strong>, and/or <strong>password</strong> <strong>again</strong> is empty</td>
<td>Üres <strong>jelszó</strong> mező</td>
</tr>
<tr class="odd">
<td>107</td>
<td>PASWORD_PASSWORD2_OLD_PASSWORD_EMPTY</td>
<td><strong>Password</strong>, and/or <strong>password</strong> <strong>again</strong> is empty and or <strong>oldPassword</strong></td>
<td>A <strong>régi jelszó</strong> és/vagy az <strong>új jelszó</strong> és/vagy az <strong>új jelszó még egyszer</strong> üres</td>
</tr>
<tr class="even">
<td>108</td>
<td>EMPTY_FILE_FIELD</td>
<td>File field is empty</td>
<td>A fájl mező üres</td>
</tr>
<tr class="odd">
<td>109</td>
<td>DOWNLOAD_ERROR</td>
<td>Download error</td>
<td>Hiba a letöltéskor</td>
</tr>
<tr class="even">
<td>110</td>
<td>CONTACT_ALREADY_IN_LIST</td>
<td>The contact has been already in the contact list</td>
<td>A kapcsolat már a kapcsolat listában van</td>
</tr>
<tr class="odd">
<td>111</td>
<td>CONTACT_NOT_FOUND</td>
<td>Contact not found</td>
<td>A kapcsolat nem található</td>
</tr>
<tr class="even">
<td>112</td>
<td>SUDDENLY_LOGGED_OUT</td>
<td>Suddenly logged out</td>
<td>Hirtelen kijelentkezés történt</td>
</tr>
<tr class="odd">
<td>113</td>
<td>DECRYPTION_FAILURE</td>
<td>Decryption failure</td>
<td>A visszafejtés sikertelen</td>
</tr>
</tbody>
</table>
<p></p>
<h5 id="távoli-szerver-oldali-hibák-remote"><span id="anchor-56"></span>Távoli, szerver oldali hibák (REMOTE)</h5>
<table>
<tbody>
<tr class="odd">
<td>201</td>
<td>MISSING_USERNAME_PASSWORD</td>
<td>Missing username and/or password</td>
<td>Hiányzó felhasználónév és/vagy jelszó</td>
</tr>
<tr class="even">
<td>202</td>
<td>BAD_USERNAME_PASSWORD</td>
<td>Bad username and/or password</td>
<td>Hibás felhasználónév és/vagy jelszó</td>
</tr>
<tr class="odd">
<td>203</td>
<td>REMOTE_FUNCTION_ERROR</td>
<td>Remote function error</td>
<td>Távoli függvény hiba</td>
</tr>
<tr class="even">
<td>204</td>
<td>USER_REGISTRATED</td>
<td>User has been already registrated</td>
<td>A felhasználó már regisztrálva van</td>
</tr>
<tr class="odd">
<td>205</td>
<td>DISABLED_CREATE_USER</td>
<td>Disabled create new user</td>
<td>Nincs engedélyezve új felhasználó hozzáadása</td>
</tr>
<tr class="even">
<td>206</td>
<td>FILE_EXIST</td>
<td>File has been already exist</td>
<td>A fájl már létezik</td>
</tr>
<tr class="odd">
<td>207</td>
<td>FILE_NOT_EXIST</td>
<td>File not exist</td>
<td>A fájl nem létezik</td>
</tr>
</tbody>
</table>
<p></p>
<h1 id="fejlesztői-dokumentáció"><span id="anchor-57"></span>Fejlesztői dokumentáció</h1>
<p>A projekt két részből áll. Egy szerverből, és egy kliensből. A szerver pythonban íródik, a kliens JavaScript-ben.</p>
<p>A szervernek két szerepe van.</p>
<p>1. a statikus (html, és JavaScript) fájlok kiszolgálása</p>
<p>2. a felhasználók fájljainak tárolása (fontos, hogy a szerver a felhasználókról minél kevesebbet tudjon, így minden, titkosan fog érkezni a szerverhez: felhasználó név, jelszó, fájlnév, fájl tartalom.)</p>
<h2 id="adattárolás"><span id="anchor-58"></span>Adattárolás</h2>
<h3 id="felhasználói-adatok-tárolása-a-szerveren"><span id="anchor-59"></span>Felhasználói adatok tárolása a szerveren</h3>
<p>A szerveren van egy mappa a felhasználóknak, ezt a <strong>data_dir</strong> konfigurációval állíthatjuk be, hogy hol legyen.<br />
Ebben a mappában minden felhasználónak létrehozunk egy új mappát, amiben a már titkos adatokat tároljuk.<br />
A felhasználó mappájába a már előre titkosított fájlok vannak titkosított névvel.</p>
<h4 id="felhasználó-mappa-generálása"><span id="anchor-60"></span>Felhasználó mappa generálása</h4>
<p>Bemenet: felhasználónév, jelszó</p>
<ol style="list-style-type: decimal">
<li>shaAlgoritmus = SHA256Salty(theConfig.server_salt)</li>
<li>felhasználó_hash = shaAlgoritmus(felhasználónév)</li>
<li>jelszó_hash = shaAlgoritmus(jelszó)</li>
<li>felhasználó_mappa = shaAlgoritmus(concat(felhasználó_hash, jelszó_hash ))</li>
</ol>
<p>Megjegyzések</p>
<ol style="list-style-type: decimal">
<li>a 2. és 3. lépés jellemzően a kliens oldalon történik meg (csak a CLI regisztrálásnál történik szerver oldalon), így a szerver már a felhasználó nevét is titkosan kapja meg.</li>
<li>Az SHA256Salty algoritmus kicserélhető, és ki is kell cserélni hosszútávon valami lassabbra</li>
<li>A theConfig.server_salt konfigurálható, lásd a konfig fejezetet</li>
<li>az SHA256Salty visszatérési értéke hexadecimális számrendszerben ábrázolt számok (00-ff)</li>
<li>Az SHA256Salty algoritmust lásd lejjebb</li>
</ol>
<h3 id="fájlnevek"><span id="anchor-61"></span>Fájlnevek</h3>
<p>A titkosítatlan fájlnevek tartalmazzák a fájlok kiterjesztését (jelenleg .txt vagy .phb (szöveges fájl, vagy telefonkönyv fájl)</p>
<p>A fájlnevek a következőképpen generálódnak (ez minden esetben a kliens oldalon történik)</p>
<p>Bemenet: jelszó, fájlnév</p>
<ol style="list-style-type: decimal">
<li>shaAlgoritmus = SHA256Salty(theConfig.server_salt)</li>
<li>fájl_név_hash = shaAlgorimus(concat(jelszó, jelszó))</li>
<li>fájl_név = AESEncryptor(fájl_név_hash, fájl_név)</li>
</ol>
<p>Megjegyzések:</p>
<ol style="list-style-type: decimal">
<li>Az shaAlgoritmus cserélhető, és érdemes is lesz valami lassabbra cserélni</li>
<li>AESEncryptor algoritmust lásd lejjebb. (ez is cserélhető lesz)</li>
<li>Jelenleg ugyanazt a jelszót használom a fájlok nevének titkosításához, mint a szerver eléréséhez, de másképp hash-elem le. (a szervernél szimplán a jelszót hashelem, itt meg a jelszót kétszer leírva hashelem, de ha a szerver oldali jelszót sikerül feltörni, akkor ezt is.</li>
</ol>
<p><span id="anchor-62"></span>Titkosított fájl (SecretFile)</p>
<p>A titkos fájl két részből áll:</p>
<p>Van egy fájlnév (lásd feljebb), és egy fájl tartalom.</p>
<p>A Titkosított fájl tartalmának felépítése:</p>
<p>titkosítatlan_tartalom = concat (időbélyeg, &quot;|&quot;, tartalom)</p>
<p>titkosított tartalom: AESEncryptor(fájl jelszó, titkosítatlan_tartalom)</p>
<p>Megjegyzések</p>
<ol style="list-style-type: decimal">
<li>az időbélyeg 1970.január 1. 0:00:00 másodpercétől eltelt másodpercek száma</li>
<li>Az AESEncryptor majd kicserélhető lesz</li>
</ol>
<h3 id="section-5"></h3>
<h3 id="aesencryptor-formátuma"><span id="anchor-63"></span>AESEncryptor formátuma</h3>
<ol style="list-style-type: decimal">
<li>hash = sha256(adat)</li>
<li>titkosítatlan = concat(hash, adat)</li>
<li>titkosított = AES256(titkosítatlan)</li>
</ol>
<p>Megjegyzés</p>
<ol style="list-style-type: decimal">
<li>A hash egy ellenőrző összeg, és mindig 64 hosszú string (0-f), mert 16-os számrendszerben van ábrázolva</li>
<li>A kimenet byte sorozat.</li>
</ol>
<h3 id="txt-fájl-.txt-formátuma"><span id="anchor-64"></span>Txt fájl (.txt) formátuma</h3>
<p>A txt fájl 4 rétegből áll.</p>
<ol style="list-style-type: decimal">
<li>titkosítatlan szöveg ( txt )</li>
<li>Minden txt fájl egy Titkosított fájl ( &lt;időbélyeg&gt;|&lt;txt&gt; )</li>
<li>Minden Titkosított fájl AESEncryptor-t használ, így (&lt;hash&gt;&lt;időbélyeg&gt;|&lt;txt&gt;) alakú</li>
<li>Az AES titkosított adat</li>
</ol>
<h3 id="telefonkönyv-fájl-.phb-formátuma"><span id="anchor-65"></span>Telefonkönyv fájl (.phb) formátuma</h3>
<p>Három rétegből áll:</p>
<ol style="list-style-type: decimal">
<li>Titkosított adat (AESEncryptor-ral titkosítva)</li>
<li><p>Az első kicsomagolás után</p>
<p>{</p>
<p>  &quot;becenév1&quot;:&lt;titkosított kontakt adat&gt;,</p>
<p>  &quot;becenév2&quot;:&lt;titkosított kontakt adat&gt;</p>
<p>}</p></li>
<li><p>Titkosítatlan kontakt adat<br />
{</p>
<p>  &quot;full_name&quot;:&quot;&lt;teljes név&gt;&quot;,</p>
<p>  &quot;phone_numbers&quot;:[</p>
<p>    {</p>
<p>      &quot;type&quot;:&quot;&lt;telefon típus&gt;&quot;,</p>
<p>      &quot;number&quot;:&quot;&lt;telefonszám&gt;&quot;</p>
<p>    }</p>
<p>  ]</p>
<p>  &quot;address&quot;:&quot;&lt;cím&gt;&quot;,</p>
<p>  &quot;description&quot;:&quot;&lt;leírás&gt;&quot;</p>
<p>}</p></li>
</ol>
<p>Megjegyzések:</p>
<ol style="list-style-type: decimal">
<li>Az AESEncryptor kicserélhető lesz</li>
<li>A &lt;titkosított becenévadat&gt; is ugyanazzal az jelszóval, és ugyanazzal az encryptorral van jelenleg titkosítva.</li>
<li>Mivel a &lt;titkosított kontakt adat&gt; külön titkosítva van, így a memóriában mindig csak egy kontaktnak látszanak az adatai.</li>
</ol>
<h2 id="szerver-oldal-felépítése"><span id="anchor-66"></span>Szerver oldal felépítése</h2>
<p>Fontos, hogy a szerver oldalt modulokból építsük fel, hogy könnyű legyen a modulokat cserélgetni.</p>
<h3 id="főbb-modulok"><span id="anchor-67"></span>Főbb modulok</h3>
<p>config: Modul a konfigurációnak, fontos, hogy ezeket a konfigurációkat (vagyis ezek egy részét) a kliens oldalon is elérhetővé kell tenni.</p>
<p>A szervert lehessen json fájlból is és command line argumentumokkal is konfigurálni.</p>
<p>A konfigurációs argumentumoknál be lehessen állítani, hogy mi az alapértéke, láthassa-e a kliens és hogy kötelező-e megadni.</p>
<p>file_manager: A felhasználói mappák és fájlok kezeléséért felelős: létrehozás, törlés, átnevezés…</p>
<p>error_object: Központosított Error kezelés, a hibaüzeneteket és azok leírását kezeli, fontos, hogy kliens oldalon is elérhető legyen.</p>
<p>rpc_wrapper: A kliens oldalról elérhető függvények, az rpc protokolltól függetlenül. Fontos szempont ezt külön kezelni mind a belső működéstől (file_manager) az authentikációtól (auth_wrapper), és az adatátvitel megvalósításától (server, rpc_request_post_handler, rpc_request_ws_handler)</p>
<p>server: Első körben tornado szervert használjunk, de gondoskodjunk arról, hogy ez cserélhető legyen.</p>
<p>Itt biztosítsuk a kliens statikus fájljainak elküldését is, és adjunk lehetőséget RPC csatlakozásra is</p>
<p>create_user – legyen egy modolunk szerver oldalon is, ami hasonlóan titkosítja a felhasználó adatokat, mint kliens oldalon, hogy szerver oldalról is tudjunk létrehozni felhasználókat CLI felületről.</p>
<h3 id="rpcwrapper-osztály"><span id="anchor-68"></span>RPCWrapper osztály</h3>
<p>Ez az osztály a külső interface.</p>
<p><img src="Pictures/10000000000002ED00000130CA5BCF2CCE5C08C7.png" title="fig:" alt=" 2. ábra: RPCWrapper class diagramm" width="567" height="230" />A függvényeket az auth_wrapper fogja meghívni, és a <strong>__userhash__</strong> és <strong>__passhare__</strong> változókat ő fogja átadni.</p>
<h3 id="komponensek-kommunikációja"><span id="anchor-69"></span>Komponensek kommunikációja</h3>
<p><img src="Pictures/100000000000046A000001FE0C437D4B232C43BF.png" title="fig:" alt=" 2. ábra: Komponensek kommunikációja" width="567" height="255" />Mint látható, a kommunikáció rétegekre van bontva, minden réteg cserélő. A példa egy fájl feltöltésének szekvenciáját mutatja be.</p>
<p>Az<strong> RPCRequestHandler</strong> a legalsó réteg, ez felel a kommunikációért a szerver és a kliens között. Jelenleg két megvalósítás érhető el:</p>
<ul>
<li>RPCRequestWSHandler: A kommunikáció Websocket protokollon keresztül történik</li>
<li>RPCRequestPOSTHandler: A kommunikáció HTTP POST protokollon történik</li>
</ul>
<p>A következő réteg a jsonrpcserver melynek a feladatai a következőek:</p>
<ol style="list-style-type: decimal">
<li>A klienstől érkezett kérések értelmezése</li>
<li>Kinyerni, az authentikációs adatokat</li>
<li>Kinyerni a felhasználó, melyik függvényt szeretné meghívni, milyen paraméterekkel </li>
<li>Átadni az authentikációs rétegnek</li>
<li>A visszakapott eredményt szerializálni</li>
<li>A szerializált adatot továbbítani a RPCRequestHandler rétegnek.</li>
</ol>
<p>Ez a réteg is cserélhető lesz, de jelenleg csak egy implementációja van, ami JSON-t használ a serializálásra.</p>
<p>Az authwrapper feladata az authentikáció biztosítása, egyes függvényeknek át kell adnia a felhasználó hash-t és jelszó hash-t.</p>
<p>Ha az authentikáció sikerült, akkor át kell adni az információkat az RPCWrapper rétegnek. Jelenleg csak egy fajta authentikáció létezik, minden alkalommal bekéri a hashelt felhasználónevet és jelszót, de ezt is ki lehet cserélni.</p>
<p>Az RPCWrapper a publikusan elérhető függvények listája, ez hívja meg az utolsó réteget a FileManager réteget.</p>
<p>A FileManager réteg a fájlok tényleges fájlműveleteket végzi.<br />
Ez is cserélhető, De jelenleg csak egy verzió érhető el, de lehetne csinálni valamilyen SQL adatbázis alapút, vagy egy tömörített zip fájlban is tárolhatnám az adatokat.</p>
<h2 id="kliens-oldal-felépítése"><span id="anchor-70"></span>Kliens oldal felépítése</h2>
<p>A kliens oldal MVC szerint íródott.</p>
<p>A View megvalósítása egyszerű html fájlokkal történik a <strong>html/</strong> mappában, ezt a <strong>pageloader </strong>componens kezeli.</p>
<p>A Controller a <strong>js/components/controller </strong>mappában lévő JavaScript fájlok</p>
<p>A Modell több modulból tevődik össze: </p>
<ol style="list-style-type: decimal">
<li><strong>UserManagerService –</strong> A felhasználó kezelésért felelős</li>
<li><strong>DirManagerService –</strong> A felhasználó mappájának kezelése</li>
<li>FileFactory – Secret fájl osztály létrehozásáért felelős</li>
<li>SecretFile, PhoneBookNumber, TxtFile – A fájlok viselkedéséért felel</li>
</ol>
<p>A szerverrel való kommunikációért két réteg felel.</p>
<p>Az RPCWrapperService, ami a szerveren meghívható függvények gyűjteménye (lásd feljebb RPCWrapper osztály fejezet), ez egy Singleton, amit a theRpcWrapper globális változóba hozunk létre a program futásának indításakor ez az osztály a theRpcClient call függvényét hívja meg.</p>
<p>És az <strong>IRPCClient</strong>, ami a tényleges kommunikációért felel.</p>
<p>Az <strong>IRPCClient </strong>egyik leszármazottja egy Singleton, ami a <strong>theRpcClient </strong>globális változóba kerül bele.</p>
<p>A<strong> SimpleJsonRpcWebSocketClientService </strong>és a <strong>SimpleJsonRpcPOSTClientService </strong>a két megvalósítása az <strong>IRPCClient</strong>-nek, az előbbi WebSocket protokollt használ, a másik HTTP POST protokollt a kommunikációért. Ezen protokollok felett mindkettő a SimpleJsonRpc-t használja.</p>
<h3 id="komponensek-kommunikációja-1"><span id="anchor-71"></span>Komponensek kommunikációja</h3>
<p><img src="Pictures/10000000000003DE000001FE695D0F088225BA75.png" title="fig:" alt=" 3. ábra: Kliens oldali komponensek kommunikációja" width="567" height="292" />A fenti példa bemutatja a kliens oldalon a komponensek kommunikációjának szekvenciáját a fájlfeltöltésen keresztül.</p>
<p>Az első réteg a <strong>Controller</strong>, ennek a feladata a felhasználó kiszolgálása, és a modell réteg elérése (az <strong>MVC </strong>szerint.)</p>
<p>A következő réteg a <strong>Model</strong>,<strong> </strong>részei:</p>
<ol style="list-style-type: decimal">
<li><p>SecretFile – A fájlokért felel, titkosítás, modosítás, létrehozás, stb.</p>
<ol style="list-style-type: decimal">
<li>TxtFile – A szöveges fájlokért felel</li>
<li>PhonebookFile – A telefonkönyv fájlokért felel</li>
</ol></li>
<li>DirManager – A felhasználómappa tartalmáért felel, listázás, törlés belőle, stb.</li>
<li>UserManager – A felhasználóért felel.</li>
</ol>
<p>A következő réteg a theRPCWrapper – a szerveren meghívható függvények gyüjteménye, ennek a feladata az theRPCClient részére elküldeni a hivandó függvényt, és annak paramétereit.</p>
<p>Ezután jön a theRPCClient ami a szerverrel való kommunikációért, és az authentikációért felel.</p>
<h2 id="megvalósítás"><span id="anchor-72"></span>Megvalósítás</h2>
<p>A megvalósításhoz Visual Studio Code-ot használtam Ubuntu linux alatt.</p>
<h3 id="fontosabb-algoritmusok"><span id="anchor-73"></span>Fontosabb algoritmusok</h3>
<h4 id="sha256salty"><span id="anchor-74"></span>SHA256Salty</h4>
<p><strong>Leírás:</strong> Ez az algoritmus egy hash-t csinál, ami sózva van.</p>
<p><strong>Bementet:</strong> str, salt_string</p>
<p>Algoritmus:</p>
<p>hexString(SHA256(preSalt(str,salt_string)))</p>
<p>Ahol preSalt(str,salt_string):</p>
<p>res = ””</p>
<p>amíg i = 0-től (n-1)-ig:</p>
<p>saltChar = salt_string[i moduló hossz(salt_string)] || &quot;\0&quot;</p>
<p>res = res + fromCharCode((charCode(str[i]) + i * charCode(saltChar) ) % 256) </p>
<p>res += saltChar;</p>
<p>amíg vége</p>
<p>return ret;</p>
<p>ahol fromCharCode egy számból adja vissza az ott elhelyezkedő ASCII karaktert, és charCode pedig egy ASCII karakterből adja vissza az ASCII kódját.</p>
<h4 id="aesencryptor"><span id="anchor-75"></span>AESEncryptor</h4>
<p><strong>Leírás:</strong> Ez az algoritmus adatokat titkosít AES256 algoritmussal</p>
<p><strong>Bemenet:</strong> data, jelszó_hash</p>
<p>Algoritmus:</p>
<p>ellenőrző_hash = sha256(data);</p>
<p>data = ellenőrző_hash + data</p>
<p>textBytes = utf8ToBytes(data)</p>
<p>encryptedBytes = AESencrypt(textBytes)</p>
<p>return encryptedBytes</p>
<h3 id="szerver-oldal-mappa-és-fájl-struktúrájának-áttekintése"><span id="anchor-76"></span>Szerver oldal mappa és fájl struktúrájának áttekintése</h3>
<p>src/web</p>
<p>├── <a href="../../../../../../common/">common</a> – A gyakran használt egyszerű függvények, osztályok helye<br />
│   ├── <a href="../../../../../../common/dictgenerator.py">dictgenerator.py</a> – JSON-t generál dictionaryból<br />
│   ├── <a href="../../../../../../common/generatedby.py">generatedby.py</a> – HTML és JavaScript fájlokba írja bele, melyik fájl, és mikor generálta (még fejleszteni kell)<br />
│   ├── <a href="../../../../../../common/__init__.py">__init__.py</a> – Csomag init fájlja<br />
│   ├── <a href="../../../../../../common/kill_log.py">kill_log.py</a> – Ha valamiért leáll a program, loggoljuk ki<br />
│   ├── <a href="../../../../../../common/singleton.py">singleton.py</a> – Singleton osztály<br />
│   └── <a href="../../../../../../common/the_project_paths.py">the_project_paths.py</a> – A projekt fontosabb mappáit tartalmazza<br />
├── <a href="../../../../../../config/">config</a> – A projekt összes beállítását itt egyben kezelem<br />
│   ├── <a href="../../../../../../config/arg.py">arg.py</a> – A beállítások argumentum típusai<br />
│   ├── <a href="../../../../../../config/config_base.py">config_base.py</a> – A the_config őse. Garantálja, hogy singleton legyen<br />
│   ├── <a href="../../../../../../config/config_factory.py">config_factory.py</a> – A config osztály létrehozója<br />
│   ├── <a href="../../../../../../config/__init__.py">__init__.py</a> – A csomag inicializálója<br />
│   ├── <a href="../../../../../../config/the_config.py">the_config.py</a> – A konfig opciók (ide lehet új beállításokat rakni)<br />
│   ├── <a href="../../../../../../config/the_config_variables.py">the_config_variables.py</a> – A konfigurációs változók, amiket aztán fel lehet használni a konfiguráció írásakor<br />
│   └── <a href="../../../../../../config/tools.py">tools.py</a> – Segéd eszközök a konfighoz<br />
├── <a href="../../../../../../data_manager/">data_manager</a> – A felhasználói adatok kezelése<br />
│   ├── <a href="../../../../../../data_manager/file_manager.py">file_manager.py</a> – Fájlok (és mappák) kezelése<br />
│   └── <a href="../../../../../../data_manager/__init__.py">__init__.py</a> – A csomag inicializálója<br />
├── <a href="../../../../../../error_object/">error_object</a> – Központosított hiba objektumok, a szerveren és a kliens oldalon is elérhetőek<br />
│   ├── <a href="../../../../../../error_object/enum2.py">enum2.py</a> – Enum kibővítése<br />
│   ├── <a href="../../../../../../error_object/error_object.py">error_object.py</a> – Egy Hiba objektum osztálya<br />
│   ├── <a href="../../../../../../error_object/error_type_enum.py">error_type_enum.py</a> – A hibák típusának enum-ja<br />
│   ├── <a href="../../../../../../error_object/error_type.py">error_type.py</a> Egy hiba típus osztálya<br />
│   ├── <a href="../../../../../../error_object/error_types.py">error_types.py</a> – Az összes fajta hiba típus (új hibatípust ide kell felvenni)<br />
│   ├── <a href="../../../../../../error_object/get_error_type_dict.py">get_error_type_dict.py</a> – Egy json-t csinál a hibatípusokból<br />
│   └── <a href="../../../../../../error_object/__init__.py">__init__.py</a> – A projekt inicializálója<br />
├── <a href="../../../../../../js_generator/">js_generator</a> – JavaScript-et generál<br />
│   ├── <a href="../../../../../../js_generator/__init__.py">__init__.py</a> – A projekt inicializálója<br />
│   └── <a href="../../../../../../js_generator/js_generator.py">js_generator.py</a> – JavaScript generátor<br />
├── <a href="../../../../../../log/">log</a> – Logokért felelős csomag<br />
│   ├── <a href="../../../../../../log/__init__.py">__init__.py</a> – A csomag inicializálója<br />
│   └── <a href="../../../../../../log/log.py">log.py</a> – A python logging inicializálása<br />
├── <a href="../../../../../../rpc_wrapper/">rpc_wrapper</a> – A szerver és a kliens közötti kommunikációért felelős osztály “felső rétege”, a meghívható függvények gyüjteménye, és authentikálás biztosítása<br />
│   ├── <a href="../../../../../../rpc_wrapper/auth_wrapper.py">auth_wrapper.py</a> – A hitelesítésért felelős wrapper függvény<br />
│   ├── <a href="../../../../../../rpc_wrapper/__init__.py">__init__.py</a> – A csomag inicializálása<br />
│   ├── <a href="../../../../../../rpc_wrapper/rpc_wrapper.py">rpc_wrapper.py</a> – A függvények, amiket a kliens is elér<br />
│   └── <a href="../../../../../../rpc_wrapper/web_method.py">web_method.py</a> – Jelzi az prc_wrapperben, ha egy függvény elérhető a kliens oldalon is<br />
├── <a href="../../../../../../server/">server</a> – Tornado webserver, mind a statikus adatok kiszolgálásáért, mind az RPC “alsó rétegéért felel”<br />
│   ├── <a href="../../../../../../server/data_request_handler.py">data_request_handler.py</a> – A generált adatokért: felel <a href="https://localhost:9443/generated/data.js">generated/data.js</a><br />
│   ├── <a href="../../../../../../server/__init__.py">__init__.py</a> – A csomag inicializálása<br />
│   ├── <a href="../../../../../../server/redirector_request_handler_factory.py">redirector_request_handler_factory.py</a> – HTTP szerver, ami átirányít a titkosított szerverre<br />
│   ├── <a href="../../../../../../server/rpc_request_post_handler_factory.py">rpc_request_post_handler_factory.py</a> – JSON RPC hívások POST protokollon keresztül<br />
│   ├── <a href="../../../../../../server/rpc_request_ws_handler_factory.py">rpc_request_ws_handler_factory.py</a> – JSON RPC hívások WebSocket protokollon keresztül<br />
│   ├── <a href="../../../../../../server/rpc_wrapper_factory.py">rpc_wrapper_factory.py</a> – Az RPC szerver létrehozása<br />
│   └── <a href="../../../../../../server/web_request_handler_factory.py">web_request_handler_factory.py</a> – A statikus fájlok kiszolgálója<br />
├── <a href="../../../../../../sha256Salty/">sha256Salty</a> – Hashelés SHA256 sózással csomagja<br />
│   ├── <a href="../../../../../../sha256Salty/__init__.py">__init__.py</a> – Csomag inicializálása<br />
│   ├── <a href="../../../../../../sha256Salty/sha256Salty2.py">sha256Salty2.py</a> – Az egyik sózott hash algoritmus<br />
│   └── <a href="../../../../../../sha256Salty/sha256Salty.py">sha256Salty.py</a> – A másik sózott hash algoritmus<br />
├── <a href="../../../../../../config.json">config.json</a> – Config fájl (nem verziókövetett)<br />
├── <a href="../../../../../../config.sample.json">config.sample.json</a> – Config fájl példa verziókövetett<br />
├── <a href="../../../../../../config.test.json">config.test.json</a> – Config fájl, a config.*.json fájlok nem verziókövetettek kivétel a sample<br />
├── <a href="../../../../../../create_user.py">create_user.py</a> – Felhasználó létrehozása<br />
├── <a href="../../../../../../run_server.py">run_server.py</a> – szerver inicializálása, és futtatása<br />
├── <a href="../../../../../../tools_create_config_csv.py">tools_create_config_csv.py</a> – A configokból csinál csv-t<br />
├── <a href="../../../../../../tools_create_config_ods.py">tools_create_config_ods.py</a> – A configokból csinál ods-t<br />
├── <a href="../../../../../../tools_create_html_file_dict.py">tools_create_html_file_dict.py</a> – A statikus html fájlok nevéből csinál egy JSON-t<br />
└── <a href="../../../../../../tools_getclasses.py">tools_getclasses.py</a> – Az összes html fájlból kinyeri a class mezőket<br />
</p>
<h3 id="kliens-oldal-mappa-és-fájl-struktúrájának-áttekintése"><span id="anchor-77"></span>Kliens oldal mappa és fájl struktúrájának áttekintése</h3>
<p>src/web<br />
├── <a href="../../../../../../generated/">generated</a> – A generált fájlok mappája<br />
│   ├── <a href="../../../../../../generated/data.js">data.js</a> – Adatok (theConfig, errorObjects,...)<br />
│   └── <a href="../../../../../../generated/theHtmlClasses.js">theHtmlClasses.js</a> – HTML Classes<br />
├── <a href="../../../../../../html/">html</a> – A statikus html fájlok<br />
│   ├── <a href="../../../../../../html/chgPassword.html">chgPassword.html</a> – Jelszóváltoztatáshoz a html fájl<br />
│   ├── <a href="../../../../../../html/createUser.html">createUser.html</a> – Új felhasználó létrehozásához a html fájl<br />
│   ├── <a href="../../../../../../html/filePassword.html">filePassword.html</a> – A fájl jelszavának megadásához a html fájl<br />
│   ├── <a href="../../../../../../html/login.html">login.html</a> – A bejelentkezéshez szükséges HTML fájl<br />
│   ├── <a href="../../../../../../html/main.html">main.html</a> – A főoldal html fájlja<br />
│   ├── <a href="../../../../../../html/newFilePassword.html">newFilePassword.html</a> – Az fájl jelszavának megadásához HTML fájl<br />
│   ├── <a href="../../../../../../html/phoneBookContact.html">phoneBookContact.html</a> - A Telefonkönyv kontaktjának HTML fájlja<br />
│   ├── <a href="../../../../../../html/phoneBookFile.html">phoneBookFile.html</a> – A telefonkönyv HTML fájlja<br />
│   ├── <a href="../../../../../../html/phoneBookModifyContact.html">phoneBookModifyContact.html</a> – A telefonkönyv kontakt módosításának HTML fájlja<br />
│   └── <a href="../../../../../../html/txtFile.html">txtFile.html</a> – A txt fájl HTML fájlja<br />
├── <a href="../../../../../../js/">js</a> – Az összes JavaScript<br />
│   ├── <a href="../../../../../../js/common/">common</a> – A gyakran használt JavaScript függvények, osztályok<br />
│   │   ├── <a href="../../../../../../js/common/js/">js</a> – Alap JavaScript függvények, osztályo<br />
│   │   │   ├── <a href="../../../../../../js/common/js/AbstractClass.js">AbstractClass.js</a> – Absztrakt osztály hack JavaScriptben<br />
│   │   │   ├── <a href="../../../../../../js/common/js/BigInttoJSONHack.js">BigInttoJSONHack.js</a> – Nagy számok tárolása JSON-ban, mert a JavaScript alapból nem támogatja<br />
│   │   │   └── <a href="../../../../../../js/common/js/tools.js">tools.js</a> – Pár hasznos függvény<br />
│   │   └── <a href="../../../../../../js/common/thirdparty/">thirdparty</a> – Külső könyvtárak.<br />
│   │       ├── <a href="../../../../../../js/common/thirdparty/aes-js/">aes-js</a> – AES titkosításhoz könyvtár<br />
│   │       │   └── <a href="../../../../../../js/common/thirdparty/aes-js/index.js">index.js</a><br />
│   │       ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/">bootstrap-4.4.1-dist</a> – A menühöz függvénykönyvtár<br />
│   │       │   ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/css/">css</a><br />
│   │       │   │   ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/css/bootstrap.css">bootstrap.css</a><br />
│   │       │   │   ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/css/bootstrap.css.map">bootstrap.css.map</a><br />
│   │       │   │   ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/css/bootstrap-grid.css">bootstrap-grid.css</a><br />
│   │       │   │   ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/css/bootstrap-grid.css.map">bootstrap-grid.css.map</a><br />
│   │       │   │   ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/css/bootstrap-grid.min.css">bootstrap-grid.min.css</a><br />
│   │       │   │   ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/css/bootstrap-grid.min.css.map">bootstrap-grid.min.css.map</a><br />
│   │       │   │   ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/css/bootstrap.min.css">bootstrap.min.css</a><br />
│   │       │   │   ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/css/bootstrap.min.css.map">bootstrap.min.css.map</a><br />
│   │       │   │   ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/css/bootstrap-reboot.css">bootstrap-reboot.css</a><br />
│   │       │   │   ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/css/bootstrap-reboot.css.map">bootstrap-reboot.css.map</a><br />
│   │       │   │   ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/css/bootstrap-reboot.min.css">bootstrap-reboot.min.css</a><br />
│   │       │   │   └── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/css/bootstrap-reboot.min.css.map">bootstrap-reboot.min.css.map</a><br />
│   │       │   └── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/js/">js</a><br />
│   │       │       ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/js/bootstrap.bundle.js">bootstrap.bundle.js</a><br />
│   │       │       ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/js/bootstrap.bundle.js.map">bootstrap.bundle.js.map</a><br />
│   │       │       ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/js/bootstrap.bundle.min.js">bootstrap.bundle.min.js</a><br />
│   │       │       ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/js/bootstrap.bundle.min.js.map">bootstrap.bundle.min.js.map</a><br />
│   │       │       ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/js/bootstrap.js">bootstrap.js</a><br />
│   │       │       ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/js/bootstrap.js.map">bootstrap.js.map</a><br />
│   │       │       ├── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/js/bootstrap.min.js">bootstrap.min.js</a><br />
│   │       │       └── <a href="../../../../../../js/common/thirdparty/bootstrap-4.4.1-dist/js/bootstrap.min.js.map">bootstrap.min.js.map</a><br />
│   │       ├── <a href="../../../../../../js/common/thirdparty/js-sha256/">js-sha256</a> – A sha256-hoz függvénykönyvtár<br />
│   │       │   ├── <a href="../../../../../../js/common/thirdparty/js-sha256/sha256.js">sha256.js</a><br />
│   │       │   └── <a href="../../../../../../js/common/thirdparty/js-sha256/sha256.min.js">sha256.min.js</a><br />
│   │       ├── <a href="../../../../../../js/common/thirdparty/simple-jsonrpc-js/">simple-jsonrpc-js</a> – Az RPC-hez függvénykönyvtár<br />
│   │       │   ├── <a href="../../../../../../js/common/thirdparty/simple-jsonrpc-js/simple-jsonrpc-js.js">simple-jsonrpc-js.js</a><br />
│   │       │   └── <a href="../../../../../../js/common/thirdparty/simple-jsonrpc-js/simple-jsonrpc-js.min.js">simple-jsonrpc-js.min.js</a><br />
│   │       ├── <a href="../../../../../../js/common/thirdparty/bootstrap.min.js">bootstrap.min.js</a><br />
│   │       ├── <a href="../../../../../../js/common/thirdparty/bootstrap.min.js.map">bootstrap.min.js.map</a><br />
│   │       ├── <a href="../../../../../../js/common/thirdparty/jquery-3.4.1.slim.min.js">jquery-3.4.1.slim.min.js</a> – Jquery a bootstrap-hoz<br />
│   │       ├── <a href="../../../../../../js/common/thirdparty/popper.min.js">popper.min.js</a> – Popper a bootstrap-hoz<br />
│   │       └── <a href="../../../../../../js/common/thirdparty/popper.min.js.map">popper.min.js.map</a> – Popper a bootstrap-hoz<br />
│   ├── <a href="../../../../../../js/components/">components</a> – A kliens komponensei<br />
│   │   ├── <a href="../../../../../../js/components/controller/">controller</a> – Az oldalak kontrollerjei<br />
│   │   │   ├── <a href="../../../../../../js/components/controller/ChgPasswordControllerService.js">ChgPasswordControllerService.js</a> – Jelszó módosítás kontrollere<br />
│   │   │   ├── <a href="../../../../../../js/components/controller/ControllerServiceBase.js">ControllerServiceBase.js</a> – A kontrollerek őse, pár alap szolgáltatás van benne<br />
│   │   │   ├── <a href="../../../../../../js/components/controller/CreateUserControllerService.js">CreateUserControllerService.js</a> – Új felhasználó létrehozásának a kontrollere<br />
│   │   │   ├── <a href="../../../../../../js/components/controller/LoginControllerService.js">LoginControllerService.js</a> – A bejelentkezés kontrollere<br />
│   │   │   ├── <a href="../../../../../../js/components/controller/MainControllerService.js">MainControllerService.js</a> – A főoldal kontrollere<br />
│   │   │   ├── <a href="../../../../../../js/components/controller/PhoneBookFileControllerService.js">PhoneBookFileControllerService.js</a> – A telefonkönyvfájl kontrollere (a SecretFileController-ből származik<br />
│   │   │   ├── <a href="../../../../../../js/components/controller/SampleControllerService.js">SampleControllerService.js</a> – Egy példa kontroller<br />
│   │   │   ├── <a href="../../../../../../js/components/controller/SecretFileControllerService.js">SecretFileControllerService.js</a> – A titkos fájlok kontrollere<br />
│   │   │   └── <a href="../../../../../../js/components/controller/TxtFileControllerService.js">TxtFileControllerService.js</a> – A txt fájlok kontrollere (a SecretFileController-ből származik)<br />
│   │   ├── <a href="../../../../../../js/components/file/">file</a> – A fájlkezeléssel foglalkozó osztályok mappája<br />
│   │   │   ├── <a href="../../../../../../js/components/file/DirManagerService.js">DirManagerService.js</a> – A mappakezeléssel foglalkozik<br />
│   │   │   ├── <a href="../../../../../../js/components/file/FileFactory.js">FileFactory.js</a> – Fájl osztály létrehozása (.phb és .txt-is)<br />
│   │   │   ├── <a href="../../../../../../js/components/file/PhoneBookFile.js">PhoneBookFile.js</a> – Telefonkönyv fájl osztály (ami SecretFile)<br />
│   │   │   ├── <a href="../../../../../../js/components/file/SecretFile.js">SecretFile.js</a> – Titkos fájl osztály<br />
│   │   │   ├── <a href="../../../../../../js/components/file/SecretJson.js">SecretJson.js</a> – Titkos Json osztály<br />
│   │   │   └── <a href="../../../../../../js/components/file/TxtFile.js">TxtFile.js</a> – Txt fájl osztály, ami SectretFile<br />
│   │   ├── <a href="../../../../../../js/components/pageloader/">pageloader</a> – Az oldalak letöltésével, és betöltésével foglalkozik<br />
│   │   │   ├── <a href="../../../../../../js/components/pageloader/HtmlDownloader.js">HtmlDownloader.js</a> – A html oldalak letöltése<br />
│   │   │   └── <a href="../../../../../../js/components/pageloader/PageLoaderService.js">PageLoaderService.js</a> – Az oldalak betöltése<br />
│   │   └── <a href="../../../../../../js/components/UserManager/">UserManager</a> – A felhasználókkal foglalkozik<br />
│   │       ├── <a href="../../../../../../js/components/UserManager/UserManagerService.js">UserManagerService.js</a> – A felhasználók osztálya<br />
│   │       └── <a href="../../../../../../js/components/UserManager/UserManagerServiceMock.js">UserManagerServiceMock.js</a> – A felhasználók osztályának kimockolt verziója<br />
│   ├── <a href="../../../../../../js/interfaces/">interfaces</a> – Interfészek<br />
│   │   ├── <a href="../../../../../../js/interfaces/encrypt/">encrypt</a> - Titkosítók<br />
│   │   │   ├── <a href="../../../../../../js/interfaces/encrypt/IEncryptor.js">Iencryptor.js</a> – Kétirányú titkosító interface<br />
│   │   │   └── <a href="../../../../../../js/interfaces/encrypt/IHash.js">Ihash.js</a> – Egy irányú titkosító interface<br />
│   │   ├── <a href="../../../../../../js/interfaces/file/">file</a> – Fájl interfészek<br />
│   │   │   └── <a href="../../../../../../js/interfaces/file/ISecretFile.js">IsecretFile.js</a> – Titkos fájl interfész<br />
│   │   ├── <a href="../../../../../../js/interfaces/RPC/">RPC</a> – RPC interfészek<br />
│   │   │   └── <a href="../../../../../../js/interfaces/RPC/IRPCClient.js">IRPCClient.js</a> - RPC kliens interfész<br />
│   │   └── <a href="../../../../../../js/interfaces/UserManager/">UserManager</a> – User manager interfészek<br />
│   │       └── <a href="../../../../../../js/interfaces/UserManager/IUserManagerService.js">IuserManagerService.js</a> – User manager interfész<br />
│   ├── <a href="../../../../../../js/lib/">lib</a> - Könyvtárak<br />
│   │   ├── <a href="../../../../../../js/lib/encrypt/">encrypt</a> – Titkosító könyvtárak<br />
│   │   │   ├── <a href="../../../../../../js/lib/encrypt/AESEncryptor.js">AESEncryptor.js</a> – Kétirányú titkosító könyvtár AES-t használva<br />
│   │   │   └── <a href="../../../../../../js/lib/encrypt/SHA256Salty.js">SHA256Salty.js</a> – Egyirányú titkosító könyvtár SHA256-ot használva sózva<br />
│   │   ├── <a href="../../../../../../js/lib/ErrorObject/">ErrorObject</a> – Hiba objektum könyvtár<br />
│   │   │   └── <a href="../../../../../../js/lib/ErrorObject/ErrorObject.js">ErrorObject.js</a> - Hiba objektum könyvtár<br />
│   │   ├── <a href="../../../../../../js/lib/RPCWrapper/">RPCWrapper</a> – RPC wrapper könyvtár<br />
│   │   │   ├── <a href="../../../../../../js/lib/RPCWrapper/RpcClients.js">RpcClients.js</a> – Az elérhető RPC kliensek tárolója (window.theRpcClients)<br />
│   │   │   └── <a href="../../../../../../js/lib/RPCWrapper/RPCWrapperService.js">RPCWrapperService.js</a> – Az összes elérhető RPC függvény<br />
│   │   └── <a href="../../../../../../js/lib/SimpleJsonRpc/">SimpleJsonRpc</a> – A SimpleJsonRpc osztályok az adatátvitelhez<br />
│   │       ├── <a href="../../../../../../js/lib/SimpleJsonRpc/SimpleJsonRpcPOSTClientService.js">SimpleJsonRpcPOSTClientService.js</a> – RPC adatátvitel HTTP POST protokollal<br />
│   │       └── <a href="../../../../../../js/lib/SimpleJsonRpc/SimpleJsonRpcWebSocketClientService.js">SimpleJsonRpcWebSocketClientService.js</a> – RPC adatátvitel WS protokollal<br />
│   ├── <a href="../../../../../../js/test/">test</a> - tesztek<br />
│   │   └── <a href="../../../../../../js/test/webtest/">webtest</a> - webtesztek<br />
│   │       ├── <a href="../../../../../../js/test/webtest/lib/">lib</a> – könyvtárak a webteszthez<br />
│   │       │   ├── <a href="../../../../../../js/test/webtest/lib/createFile.js">createFile.js</a> – robotkattintgatással fájl létrehozása<br />
│   │       │   ├── <a href="../../../../../../js/test/webtest/lib/login.js">login.js</a> – robotkattintgatással bejelentkezés<br />
│   │       │   ├── <a href="../../../../../../js/test/webtest/lib/phonebook.js">phonebook.js</a> – robotkattintgatással telefonkönyv manipulációk<br />
│   │       │   └── <a href="../../../../../../js/test/webtest/lib/tools.js">tools.js</a> – eszközök a web-teszthez<br />
│   │       ├── <a href="../../../../../../js/test/webtest/dataMedia.js">dataMedia.js</a> – Telefonkönyv adatok az ELTE oldaláról<br />
│   │       ├── <a href="../../../../../../js/test/webtest/getDataFromMedia.js">getDataFromMedia.js</a> – adatok letöltéséhez segéd szkript az ELET oldaláról<br />
│   │       └── <a href="../../../../../../js/test/webtest/testPhoneBookAddContacts.js">testPhoneBookAddContacts.js</a> – Egy teszt, ami létrehoz egy telefonkönyvet, és feltölti adatokkal<br />
│   ├── <a href="../../../../../../js/htmlFileDict.js">htmlFileDict.js</a> – A htmlFájlok JSON-ja<br />
│   ├── <a href="../../../../../../js/main.js">main.js</a> – A main JavaScript fájl<br />
├── <a href="../../../../../../style/">style</a> – Az oldal stílusa<br />
│   ├── <a href="../../../../../../style/bootstrap.min.css">bootstrap.min.css</a> – Bootstraphoz stílus lap<br />
│   ├── <a href="../../../../../../style/bootstrap.min.css.map">bootstrap.min.css.map</a> – Bootstraphoz stílus lap<br />
│   └── <a href="../../../../../../style/style.css">style.css</a> – saját stílus lap<br />
├── <a href="../../../../../../favicon.ico">favicon.ico</a> - ikon<br />
├── <a href="../../../../../../index.html">index.html</a> - főoldal<br />
└── <a href="../../../../../../testPhoneBook.html">testPhoneBook.html</a> – A telefonkönyv teszt indítása</p>
<h3 id="fejlesztési-lehetőségek"><span id="anchor-78"></span>Fejlesztési lehetőségek</h3>
<p>A projekt még nagyon a kezdeti időszakában van, így rengeteg fejlesztési lehetőség van.</p>
<ol style="list-style-type: decimal">
<li>A kliens oldalt megvalósítani Android és PC alkalmazásként is.</li>
<li><p>Több típusú fájl, ne csak txt vagy telefonkönyv fájl, hanem</p>
<ol style="list-style-type: decimal">
<li>Fájl típusú, amibe bármilyen fájlt le lehet titkosítani</li>
<li>Naptár titkosítás.</li>
</ol></li>
<li>Fájl importálás/exportálás.</li>
<li>Telefonkönyv importálás (főleg a majd készülő androidos verzióban)</li>
<li>UI-ről választható titkosítási forma, hashelési forma.</li>
<li>SSL helyett quantum safe kommunikáció</li>
<li>Szerver windows support.</li>
</ol>
<h2 id="tesztelési-terv"><span id="anchor-79"></span>Tesztelési terv</h2>
<p>A txt fájlok teszteléséhez Arany János összes költeményeit használom:</p>
<p><a href="https://mek.oszk.hu/00500/00597/html/index.htm" class="uri">https://mek.oszk.hu/00500/00597/html/index.htm</a></p>
<p>A telefonkönyvek teszteléséhez az ELTE honlapján elérhető telefonszámokat használom:</p>
<ol style="list-style-type: decimal">
<li>ELTE IK Média- és Oktatásinformatikai Tanszék &gt; A Tanszékről &gt; Oktatók és munkatársak<br />
<a href="https://mot.inf.elte.hu/munkatarsak" class="uri">https://mot.inf.elte.hu/munkatarsak</a></li>
</ol>
<h3 id="előkészületek-1"><span id="anchor-80"></span>Előkészületek</h3>
<p>Létrehozok egy üres adatbázist a projekt mellé, és megcsinálom a szükséges config fájlt:</p>
<p>{</p>
<p>&quot;host&quot;:&quot;localhost&quot;,</p>
<p>&quot;logFile&quot;:&quot;/var/tmp/rpd_test_[[now]].log&quot;,</p>
<p>&quot;open_port&quot;:11080,</p>
<p>&quot;secure_port&quot;:11443,</p>
<p>&quot;enable_create_user&quot;: true,<br />
&quot;logLevel&quot;:&quot;DEBUG&quot;,</p>
<p>&quot;show_encrypted_data&quot;: true,</p>
<p>&quot;crt_file&quot;: &quot;[[dir_project]]/../.key/rpd.crt&quot;,</p>
<p>&quot;key_file&quot;: &quot;[[dir_project]]/../.key/rpd.key&quot;,</p>
<p>&quot;web_root&quot;: &quot;[[dir_project]]/src/web&quot;,</p>
<p>&quot;data_dir&quot;: &quot;[[dir_project]]/../test_data&quot;</p>
<p>}</p>
<h3 id="eset-1-a-szerver-elindítása-black-box"><span id="anchor-81"></span>Eset 1: A szerver elindítása (black box)</h3>
<p>./run_server --configFile config.test.json</p>
<h4 id="elvárt-eredmény"><span id="anchor-82"></span>Elvárt eredmény</h4>
<p>1. <strong>Loggolja a konfigurált beállításokat:</strong></p>
<p>[2020-04-08 12:25:01,276][INFO] Loglevel: INFO</p>
<p>[2020-04-08 12:25:01,440][INFO] Runner command: ./run_server.py --configFile config.test.json</p>
<p>[2020-04-08 12:25:01,440][INFO] Config:</p>
<p>[2020-04-08 12:25:01,440][INFO] configFile: config.test.json</p>
<p>[2020-04-08 12:25:01,440][INFO] debug: False</p>
<p>[2020-04-08 12:25:01,440][INFO] logLevel: INFO</p>
<p>[2020-04-08 12:25:01,440][INFO] logFile: /var/tmp/rpd_test_20200408_122501.log</p>
<p>[2020-04-08 12:25:01,440][INFO] logFormat: [%(asctime)s][%(levelname)s] %(message)s</p>
<p>[2020-04-08 12:25:01,440][INFO] show_rpc_message: False</p>
<p>[2020-04-08 12:25:01,440][INFO] open_port: 11080</p>
<p>[2020-04-08 12:25:01,440][INFO] debug_open_port: 8081</p>
<p>[2020-04-08 12:25:01,440][INFO] secure_port: 11443</p>
<p>[2020-04-08 12:25:01,441][INFO] host: localhost</p>
<p>[2020-04-08 12:25:01,441][INFO] crt_file: /home/somla/working/rpd/master/../.key/rpd.crt</p>
<p>[2020-04-08 12:25:01,441][INFO] key_file: /home/somla/working/rpd/master/../.key/rpd.key</p>
<p>[2020-04-08 12:25:01,441][INFO] web_root: /home/somla/working/rpd/master/src/web</p>
<p>[2020-04-08 12:25:01,441][INFO] data_dir: /home/somla/working/rpd/master/../test_data</p>
<p>[2020-04-08 12:25:01,441][INFO] test_dir: /var/tmp/real_private_data</p>
<p>[2020-04-08 12:25:01,441][INFO] salt: My own Salt</p>
<p>[2020-04-08 12:25:01,441][INFO] server_salt: Server salt</p>
<p>[2020-04-08 12:25:01,441][INFO] enable_create_user: True</p>
<p>[2020-04-08 12:25:01,441][INFO] show_encrypted_data: True</p>
<p>[2020-04-08 12:25:01,441][INFO] defaultRpcClient: SimpleJsonRpcWebSocketClientService</p>
<p>[2020-04-08 12:25:01,441][INFO] hideMessageTime: 4000</p>
<p></p>
<p>2. loggolja a szerver elérhetőségeit:</p>
<p>[2020-04-08 12:25:01,443][INFO] HTTPS Server starting... https://localhost:11443/</p>
<p>[2020-04-08 12:25:01,444][INFO] HTTP redirect Server starting... <a href="http://localhost:11080/" class="uri">http://localhost:11080/</a></p>
<p></p>
<p><strong>3. írja ki őket a /var/tmp/rpd_test_*.log</strong> (a * helyére az aktuális dátumot várom)</p>
<p>A /var/tmp/rpd_test_20200408_122501.log fájl tényleg létrejött, és tényleg ugyanaz van benne, mint a képernyőn.</p>
<p></p>
<p><img src="Pictures/100002010000035B000000B22FB9CDEA4FD37054.png" title="fig:" alt=" 4. ábra: Átirányító oldal" width="642" height="133" />4. A <a href="http://localhost:11080/" class="uri">http://localhost:11080/</a> -re kattintva jussunk el az átirányító oldalra, és az irányítson át minket a titkosított oldalra 3 másodperc múlva</p>
<p></p>
<div class="figure">
<img src="Pictures/10000201000001F40000014517A57B782B43355D.png" alt=" 4. ábra: Bejelentkező oldal" width="499" height="324" />
<p class="caption"><br />
4. ábra: Bejelentkező oldal</p>
</div>
<h3 id="eset-2-felhasználók-létrehozása-konzolból-black-box"><span id="anchor-83"></span>Eset 2: Felhasználók létrehozása konzolból (black box)</h3>
<p>2 felhasználót fogok létrehozni</p>
<p><strong>Felhasználónév</strong>: test_user1 <strong>password:</strong> password1<br />
<strong>Felhasználónév</strong>: test_user2 <strong>password: </strong>password2</p>
<div class="figure">
<img src="Pictures/100002010000031D000000F2E88902532E77D116.png" alt=" 4. ábra: Felhasználó létrehozása CLI-ből" width="642" height="195" />
<p class="caption"><br />
4. ábra: Felhasználó létrehozása CLI-ből</p>
</div>
<h4 id="elvárt-eredmény-1"><span id="anchor-84"></span>Elvárt eredmény</h4>
<p><img src="Pictures/100002010000024E000000623AFAC37FC5C00533.png" title="fig:" alt=" 4. ábra: Titkos felhasználói mappák" width="589" height="98" />1. Hozzon létre két felhasználói mappát:</p>
<p>2. Be tudjak lépni a felhasználókkal, ezt lásd lejjebb a bejelentkezés tesztelésénél.</p>
<h3 id="eset-3-üresen-hagyott-mezők-felhasználó-létrehozása-közben"><span id="anchor-85"></span><strong>Eset 3</strong>: Üresen hagyott mezők felhasználó létrehozása közben</h3>
<p>Vagy a felhasználónevet, vagy a jelszó mezőt, vagy mindkettőt hagyjuk üresen</p>
<h4 id="elvárt-eredmény-2"><span id="anchor-86"></span>Elvárt eredmény</h4>
<p><img src="Pictures/100002010000031D0000013A193006CF92705A40.png" title="fig:" alt=" 4. ábra: Hibás felhasználó létrehozás (üres felhasználónév vagy jelszó, vagy jelszó mégegyszer mező)" width="623" height="245" /><strong>Username and/or password is empty</strong> üzenet, a data dir változatlan hagyása</p>
<h3 id="eset-4-jelszó-és-jelszó-mégegyszer-nem-egyezik-cli"><span id="anchor-87"></span><strong>Eset 4</strong>: Jelszó és jelszó mégegyszer nem egyezik (CLI)</h3>
<h3 id="ábra-a-jelszó-és-a-jelszó-mégegyszer-mező-nem-egyezikelvárt-eredmény"><img src="Pictures/100002010000031D00000086F18BAFFF29656A89.png" title="fig:" alt=" 4. ábra: A jelszó és a jelszó mégegyszer mező nem egyezik" width="642" height="108" /><span id="anchor-88"></span>Elvárt eredmény</h3>
<p>Hibaüzenet, test_data dir ne változzon</p>
<h3 id="eset-5-létező-felhasználó-hozzáadása-azonos-jelszóval"><span id="anchor-89"></span><strong>Eset 5:</strong> Létező felhasználó hozzáadása azonos jelszóval</h3>
<p>Meg kell jegyezzem, hogy itt a felhasználónév és a jelszó páros azonosít egy felhasználót, így például <strong>User1/password1</strong> és <strong>User1/password2</strong> nem ugyanaz a felhasználó.</p>
<p>Gondolkodtam ennek javításán, de nem igazán lehetséges úgy, hogy ne adjon többlet információt a szerver üzemeltetőjének a felhasználóról.</p>
<p>test_user1/password1</p>
<div class="figure">
<img src="Pictures/100002010000031D0000008614CCB9C6A936E847.png" alt=" 4. ábra: Létező felhasználó hozzáadása mégegyszer" width="642" height="108" />
<p class="caption"><br />
4. ábra: Létező felhasználó hozzáadása mégegyszer</p>
</div>
<h4 id="elvárt-eredmény-3"><span id="anchor-90"></span>Elvárt eredmény</h4>
<p>Hibaüzenet, test_data dir ne változzon</p>
<h3 id="eset-6-létező-felhasználó-hozzáadása-más-jelszóval-cli"><span id="anchor-91"></span><strong>Eset 6</strong>: Létező felhasználó hozzáadása más jelszóval (cli)</h3>
<p><strong>test_user1/password2</strong> létrehozása</p>
<h4 id="ábra-létező-felhasználó-hozzáadása-más-jelszóvalelvárt-eredmény"><img src="Pictures/100002010000031D00000086C6457FFF882A34CD.png" title="fig:" alt=" 4. ábra: Létező felhasználó hozzáadása más jelszóval" width="613" height="103" /><span id="anchor-92"></span>Elvárt eredmény</h4>
<p>1. Hozzon létre egy új felhasználói mappát</p>
<p><img src="Pictures/100002010000024E00000074FBA42ABA16A2EA41.png" title="fig:" alt=" 4. ábra: Új mappa létrejött a felhasználónak" width="589" height="115" />2. Be tudjak lépni az új felhasználóval, ezt lásd lejjebb a bejelentkezés tesztelésénél.</p>
<h3 id="eset-7-belépés-hibás-jelszóval-gui"><span id="anchor-93"></span><strong>Eset 7</strong>: Belépés hibás jelszóval (GUI)</h3>
<p>Bejelentkezés<strong> </strong>a következő felhasználókkal</p>
<table>
<tbody>
<tr class="odd">
<td>Felhasználónév</td>
<td>Jelszó</td>
</tr>
<tr class="even">
<td>I am not exist</td>
<td>I am not exist</td>
</tr>
<tr class="odd">
<td>test_user1</td>
<td>almafa</td>
</tr>
<tr class="even">
<td>test_user2</td>
<td>dinnye</td>
</tr>
</tbody>
</table>
<p></p>
<p>(<strong>SimpleJsonRpcWebSocketClientService</strong> és <strong>SimpleJsonRpcPOSTClientService </strong>segítségével is)</p>
<h4 id="elvárt-eredmény-4"><span id="anchor-94"></span>Elvárt eredmény</h4>
<p>Hibaüzenet</p>
<h3 id="eset-8-bejelentkezés-valós-felhasználókkal-gui"><span id="anchor-95"></span><strong>Eset 8</strong>: Bejelentkezés valós felhasználókkal (GUI)</h3>
<p>Bejelentkezés<strong> </strong>a következő felhasználókkal (<strong>SimpleJsonRpcWebSocketClientService</strong> és <strong>SimpleJsonRpcPOSTClientService </strong>segítségével is)</p>
<table>
<tbody>
<tr class="odd">
<td>Felhasználónév</td>
<td>Jelszó</td>
</tr>
<tr class="even">
<td>test_user1</td>
<td>password1</td>
</tr>
<tr class="odd">
<td>test_user1</td>
<td>password2</td>
</tr>
<tr class="even">
<td>test_user2</td>
<td>password2</td>
</tr>
</tbody>
</table>
<p></p>
<h4 id="section-6"></h4>
<h4 id="elvárt-eredmény-5"><span id="anchor-96"></span>Elvárt eredmény</h4>
<p>Bejelentkezés az oldalra, és a main oldalra irányítás.</p>
<h3 id="ábra-főoldal-még-nincs-egy-fájl-sem"><img src="Pictures/10000201000001D900000140756AC15CC24E107F.png" title="fig:" alt=" 4. ábra: Főoldal (még nincs egy fájl sem)" width="473" height="320" /></h3>
<h3 id="eset-9-felhasználó-létrehozása-gui"><span id="anchor-97"></span><strong>Eset 9: </strong>Felhasználó létrehozása (GUI)</h3>
<p><strong>test_user3/password3</strong> létrehozása</p>
<h4 id="elvárt-eredmény-6"><span id="anchor-98"></span>Elvárt eredmény</h4>
<p><img src="Pictures/100002010000023D000001AA20A24A135A40C772.png" title="fig:" alt=" 4. ábra: Új felhasználó létrehozva" width="573" height="425" />1. sikeres létrehozás</p>
<p>2. sikeres bejelntekzés az új felhasználóval (lásd <strong>8. eset: Bejelentkezés valós felhasználókkal (GUI) </strong>).</p>
<h3 id="eset10-bejelentkezés-nem-létező-felhasználóval"><span id="anchor-99"></span>Eset10: Bejelentkezés nem létező felhasználóval</h3>
<p>Bejelentkezés „I am not exist” felhasználóval</p>
<p>Elvárt eredmény:</p>
<h3 id="ábra-nem-létező-felhasználóeset11-txt-fájl-létrehozása"><img src="Pictures/10000201000001FC0000017DFCC82713BC118645.png" title="fig:" alt=" 5. Ábra: Nem létező felhasználó" width="383" height="262" /><span id="anchor-100"></span><strong>Eset11</strong>: Txt Fájl létrehozása</h3>
<p>Hozzunk létre pár txt fájlt.</p>
<h4 id="section-7"></h4>
<h4 id="elvárt-eredmény-7"><span id="anchor-101"></span>Elvárt eredmény</h4>
<p>A fájlok létrejönnek, és meg is tudjuk őket nyitni, lásd lejjebb</p>
<div class="figure">
<img src="Pictures/100002010000039700000391C7F524C2E18491CD.png" alt=" 4. ábra: Új text fájl létrehozva" width="604" height="600" />
<p class="caption"><br />
4. ábra: Új text fájl létrehozva</p>
</div>
<h3 id="eset-12-telefonkönyv-fájl-létrehozása"><span id="anchor-102"></span><strong>Eset 12</strong>: Telefonkönyv fájl létrehozása</h3>
<p>Ehhez csináltam egy teszt robotot, ami létrehoz egy Telefonkönyv fájlt, és feltölti adatokkal.</p>
<p><a href="https://localhost:11443/testPhoneBook.html" class="uri">https://localhost:11443/testPhoneBook.html</a></p>
<p><strong>waitTime</strong>: Megmondja, hogy mennyit várjon a teszt két művelet között<br />
<strong>username</strong>: Melyik felhasználóval lépjen be<br />
<strong>password</strong>: Mi a felhasználó jelszava<br />
<strong>fileName</strong>: Mi legyen a létrehozandó fájl neve<br />
<strong>filePassword</strong>: Mi legyen a jelszava</p>
<div class="figure">
<img src="Pictures/10000201000001FC0000022BBC859C5CC233AF1F.png" alt=" 4. ábra: Telefonkönyv létrehozása robottal" width="508" height="554" />
<p class="caption"><br />
4. ábra: Telefonkönyv létrehozása robottal</p>
</div>
<h4 id="elvárt-eredmény-8"><span id="anchor-103"></span>Elvárt eredmény</h4>
<p>A fájl létrehozása, és a telefonkönyv adatok tárolása.</p>
<h3 id="eset-13-ellenőrizzük-hogy-a-szerveren-tárolt-adatok-valóban-titkosak"><span id="anchor-104"></span><strong>Eset 13: Ellenőrizzük, hogy a szerveren tárolt adatok valóban titkosak! </strong></h3>
<ol style="list-style-type: decimal">
<li>Kilistázzuk a mappákat tee paranccsal</li>
<li>megnézzük a fájlokat cat paranccsal</li>
<li>megnézzük a fájlokat hexdump paranccsal</li>
</ol>
<p><img src="Pictures/100002010000024E000002A2BFA6C3F2C761EB55.png" title="fig:" alt=" 4. ábra: Titkos felhasználónevek, és fájlnevek" width="589" height="674" />Itt látható, hogy mind a mappák (felhasználók nevei), és a benne lévő fájlok nevei is titkosítottak.</p>
<p><img src="Pictures/100002010000024E000002B41EE2773EF9BEFDC2.png" title="fig:" alt=" 4. ábra: Titkos fájl tartalma cat parancssal megjelenítve " width="589" height="691" />Itt látható, hogy a fájl cat-tal megjelenítve is értelmetlen</p>
<h3 id="a-teszt-közben-létrejött-felhasználók-és-fájlok"><span id="anchor-105"></span>A teszt közben létrejött felhasználók és fájlok</h3>
<h4 id="felhasználók"><span id="anchor-106"></span>Felhasználók</h4>
<table>
<tbody>
<tr class="odd">
<td>test_user1</td>
<td>password1</td>
</tr>
<tr class="even">
<td>test_user1</td>
<td>password2</td>
</tr>
<tr class="odd">
<td>test_user2</td>
<td>password2</td>
</tr>
<tr class="even">
<td>test_user3</td>
<td>password3</td>
</tr>
</tbody>
</table>
<h4 id="fájlok"><span id="anchor-107"></span>Fájlok</h4>
<table>
<tbody>
<tr class="odd">
<td>test_user1/password1</td>
<td>A MÉH ROMÁNCA.txt</td>
<td>Petofi</td>
</tr>
<tr class="even">
<td>test_user1/password1</td>
<td>A SZEGÉNY JOBBÁGY.txt</td>
<td>Petofi</td>
</tr>
<tr class="odd">
<td>test_user1/password1</td>
<td>A VARRÓ LEÁNYOK.txt</td>
<td>Petofi</td>
</tr>
<tr class="even">
<td>test_user1/password1</td>
<td>ARANYAIMHOZ.txt</td>
<td>Petofi</td>
</tr>
<tr class="odd">
<td>test_user1/password1</td>
<td>EGYKORI TANÍTVÁNYOM EMLÉKKÖNYVÉBE.txt</td>
<td>Petofi</td>
</tr>
<tr class="even">
<td>test_user1/password1</td>
<td>VÁLASZ PETŐFINEK.txt</td>
<td>Petofi</td>
</tr>
<tr class="odd">
<td>test_user1/password1</td>
<td>ELTE IK Média- és Oktatásinformatikai Tanszék.phb</td>
<td>Media</td>
</tr>
</tbody>
</table>
<p></p>
<h1 id="section-8"></h1>
<h1 id="forrásjegyzet"><span id="anchor-108"></span>Forrásjegyzet</h1>
<p>[1] tornado hivatalos oldala: <a href="https://www.tornadoweb.org/en/stable/" class="uri">https://www.tornadoweb.org/en/stable/</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[2] tornado GitHub oldala: <a href="https://github.com/tornadoweb/tornado/" class="uri">https://github.com/tornadoweb/tornado/</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[3] tornado PyPi oldala: <a href="https://pypi.org/project/tornado/" class="uri">https://pypi.org/project/tornado/</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[4] jsonrpcserver GitHub oldala: <a href="https://github.com/bcb/jsonrpcserver" class="uri">https://github.com/bcb/jsonrpcserver</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[5] jsonrpcserver PyPi oldala: <a href="https://pypi.org/project/jsonrpcserver/" class="uri">https://pypi.org/project/jsonrpcserver/</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[6] pandas hivatalos oldala: <a href="https://pandas.pydata.org/" class="uri">https://pandas.pydata.org/</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[7] pandas GitHub oldala: <a href="https://github.com/pandas-dev/pandas" class="uri">https://github.com/pandas-dev/pandas</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[8] pandas PyPi oldala: <a href="https://pypi.org/project/pandas/" class="uri">https://pypi.org/project/pandas/</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[9] Pyexcel-ods GitHub oldala: <a href="https://github.com/pyexcel/pyexcel-ods" class="uri">https://github.com/pyexcel/pyexcel-ods</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[10] Pyexcel-ods PyPi oldala: <a href="https://pypi.org/project/pyexcel-ods/" class="uri">https://pypi.org/project/pyexcel-ods/</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[11] aes-js NPM oldala: <a href="https://www.npmjs.com/package/aes-js" class="uri">https://www.npmjs.com/package/aes-js</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[12] Aes-js hivatalos oldala: <a href="https://cdn.rawgit.com/ricmoo/aes-js" class="uri">https://cdn.rawgit.com/ricmoo/aes-js</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[13] bootstrap hivatalos oldala: <a href="https://getbootstrap.com/" class="uri">https://getbootstrap.com/</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[14] jquery hivatalos oldala: <a href="https://jquery.com/" class="uri">https://jquery.com/</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[15] Js-sha256 NPM oldala: <a href="https://www.npmjs.com/package/js-sha256" class="uri">https://www.npmjs.com/package/js-sha256</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[16] popper.js hivatalos oldala: <a href="https://popper.js.org/" class="uri">https://popper.js.org/</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[17] Simple-jsonrpc-js GitHub oldala: <a href="https://github.com/jershell/simple-jsonrpc-js" class="uri">https://github.com/jershell/simple-jsonrpc-js</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[18] Google Chrome hivatalos oldala: <a href="https://www.google.com/chrome/" class="uri">https://www.google.com/chrome/</a> [Hozzáférés dátuma: 28 04 2020]</p>
<p>[19] Mozilla Firefox hivatalos oldala: <a href="https://www.mozilla.org/en-US/firefox/" class="uri">https://www.mozilla.org/en-US/firefox/</a> [Hozzáférés dátuma: 28 04 2020]</p>
</body>
</html>
